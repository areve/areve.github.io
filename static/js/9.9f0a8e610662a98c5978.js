webpackJsonp([9],{"4AKn":function(t,n,a){"use strict";var r=a("Zrlr"),i=a.n(r),e=a("wxAW"),o=a.n(e),s=a("kQ6u");function h(t,n,a,r,i){for(var e=0,o=0;o<a;++o){if(e>o)for(var s=0;s<i;++s){var h=n+e*r+s,f=n+o*r+s,u=t[h];t[h]=t[f],t[f]=u}for(var v=a;e&(v>>=1);)e&=~v;e|=v}}function f(t,n,a,r,i){for(var e=n+a*r/2,o=0;o<a/2;++o)for(var s=0;s<i;++s){var h=n+o*r+s,f=e+o*r+s,u=t[h];t[h]=t[f],t[f]=u}}function u(t,n,a,r,i,e,o){return c(t,n,a,r,i,e,!0,o)}function v(t,n,a,r,i,e,o){return c(t,n,a,r,i,e,!1,o)}function c(t,n,a,r,i,e,o,s){for(var u=Math.PI,v=0;v<r;++v){o&&(f(t,v*e,a,i,s),f(n,v*e,a,i,s)),h(t,v*e,a,i,s),h(n,v*e,a,i,s);for(var c=o?u:-u,l=1;l<a;l+=l)for(var d=c/l,g=Math.sin(d/2),m=1,w=0,p=-2*g*g,C=Math.sin(d),_=0;_<l;++_){for(var y=_;y<a;y+=2*l)for(var b=y+l,k=0;k<s;++k){var P=v*e+y*i+k,M=v*e+b*i+k,R=t[M],B=n[M],I=R*m-B*w,L=R*w+B*m;t[M]=t[P]-I,n[M]=n[P]-L,t[P]+=I,n[P]+=L}var A=p*w+C*m;m+=p*m-C*w,w+=A}o||(f(t,v*e,a,i,s),f(n,v*e,a,i,s))}}var l=function(){function t(n,a,r,e,o,h){i()(this,t),this.channels=n,this.width=e,this.height=o,this.real=a||new Array(e*o*4),this.imag=r||new Array(e*o*4),this.buffer=h||new s.a(this.width,this.height)}return o()(t,[{key:"clone",value:function(){for(var n=new Array(this.real.length),a=0;a<this.real.length;a++)n[a]=this.real[a];for(var r=new Array(this.imag.length),i=0;i<this.imag.length;i++)r[i]=this.imag[i];return new t(this.channels,n,r,this.width,this.height)}},{key:"toBuffer",value:function(t){for(var n=new s.a(this.width,this.height),a=this.real,r=n.uint8,i=this.width*this.height,e=0;e<i;++e){for(var o=0;o<this.channels;++o){var h=4*e+o,f=a[h];f=f<0?0:f>1?1:f,t&&(f=Math.pow(f,1/t)),r[h]=255*f}r[4*e+3]=255}return n}},{key:"toMaginitude",value:function(){for(var t=this.clone(),n=t.real,a=t.imag,r=t.width*t.height,i=0;i<r;++i)for(var e=0;e<this.channels;++e){var o=4*i+e,s=n[o],h=a[o];n[o]=Math.sqrt(s*s+h*h)/r,a[o]=0}return t}},{key:"toPhase",value:function(){for(var t=this.clone(),n=t.real,a=t.imag,r=t.width*t.height,i=Math.PI,e=0;e<r;++e)for(var o=0;o<this.channels;++o){var s=4*e+o,h=n[s],f=a[s];n[s]=Math.atan2(f,h)/i/2+.5,a[s]=0}return t}},{key:"ifft",value:function(){var t=this.clone(),n=t.width,a=t.height,r=t.real,i=t.imag;u(r,i,n,a,4,4*n,this.channels),u(r,i,a,n,4*n,4,this.channels);for(var e=n*a,o=0;o<e;++o)for(var s=0;s<this.channels;++s){var h=4*o+s;r[h]=r[h]/e,i[h]=0}return t}},{key:"fft",value:function(){var t=this.clone(),n=t.width,a=t.height,r=t.real,i=t.imag;return v(r,i,n,a,4,4*n,this.channels),v(r,i,a,n,4*n,4,this.channels),t}},{key:"autoContrast",value:function(){for(var t=this.clone(),n=t.real,a=t.width*t.height,r=[1,1,1,1],i=[0,0,0,0],e=0;e<a;++e)for(var o=0;o<this.channels;++o){var s=n[4*e+o];r[o]=Math.min(s,r[o]),i[o]=Math.max(s,i[o])}for(var h=0;h<a;++h)for(var f=0;f<this.channels;++f){var u=4*h+f;n[u]=(n[u]-r[f])/(i[f]-r[f])}return t}}],[{key:"createFromImageBuffer",value:function(n){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=n.width*n.height,i=new Array(n.width*n.height*4),e=new Array(n.width*n.height*4),o=n.uint8,s=0;s<r;++s)for(var h=0;h<a;++h){var f=4*s+h;i[f]=o[f]/255,e[f]=0}return new t(a,i,e,n.width,n.height,n)}},{key:"createFromImage",value:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=s.a.createFromImage(n);return t.createFromImageBuffer(r,a)}}]),t}();n.a=l},vv2h:function(t,n){},y0UR:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a("woOf"),i=a.n(r),e=(a("4AKn"),a("eiJk"),a("kQ6u"));function o(){var t=[];t.push.apply(t,arguments);var n=t.shift(0);if(0===t.length)return"function"==typeof n?n():n;for(var a=[],r=0;r<n;r++)a.push(o.apply(this,t));return a}var s={plotLine:function(t){for(var n=this.clone(),a=n.uint8,r=n.width,i=n.height,e=r*i,s=o(0,4*r),h=t*r*4,f=0;f<4*r;++f)s[f]=a[h+f];for(f=0;f<e;++f)for(var u=0;u<3;++u){var v=f/r/i,c=f%r;a[4*f+u]=255-s[4*c+u]<255*v?255:0}return n},histogram:function(t){for(var n=this.clone(),a=n.uint8,r=n.width,i=n.height,e=r*i,s=o(3,r,0),h=0;h<e;++h)for(var f=0;f<3;++f){var u=4*h+f;s[f][Math.round(a[u]/255*(r-1))]++}if(t)for(h=0;h<r;++h)for(f=0;f<3;++f){u=4*h+f;s[f][h]=Math.log(s[f][h])*Math.LOG10E,s[f][h]=s[f][h]}var v=e;v=0;for(h=0;h<r;++h)for(f=0;f<3;++f)v=Math.max(s[f][h],v);for(h=0;h<e;++h)for(f=0;f<3;++f){var c=h%r,l=~~(h/r);a[u=4*h+f]=i-s[f][c]/v*i<l?255:0}return n}},h={factoryGradientPaint:function(){return function(t,n,a,r){return-16777216|255*(t%n/(n-1))<<8|255*(~~(t/n)/(a-1))}},factorySinePaint:function(t){var n=2*(t=t||1)*Math.PI;return function(t,a,r,i){var e=t%a/(a-1),o=127.5*Math.sin(n*e)+127.5;return 255<<24|o<<16|o<<8|o}},factorySpotPaint:function(t,n,a){n=n||0,a=a||0;var r=(t=t||1)/2,i=r*r;return function(t,r,e,o){var s=t%r/(r-1)-.5+n,h=~~(t/r)/(e-1)-.5+a,f=s*s+h*h>i?0:255;return 255<<24|f<<16|f<<8|f}},factorySoftSpotPaint:function(t,n,a,r){a=a||0,r=r||0;var i=(t=t||1)/2,e=(n=n||.5)/2;return a-=.5,r-=.5,function(t,n,o,s){var h=t%n/(n-1)+a,f=~~(t/n)/(o-1)+r,u=Math.sqrt(h*h+f*f),v=u>i?0:u>e?255*(u-i)/(e-i):255;return 255<<24|v<<16|v<<8|v}},factoryCheckPaint:function(t){return t=t||8,function(n,a,r,i){var e=(~~(t*(n%a/a))+~~(t*(~~(n/a)/r))+1)%2*255;return 255<<24|e<<16|e<<8|e}},factoryGaussianSpotPaint:function(){return function(t,n,a,r){var i=t%n/(n-1)-.5,e=~~(t/n)/(a-1)-.5,o=Math.exp(i*i/-.03125)*Math.exp(e*e/-.03125)*255;return 255<<24|o<<16|o<<8|o}}},f=(a("gTRW"),function(t,n,a,r){return t*r+n*a}),u=function(t,n,a,r){return t*(r+n*a)},v=function(t,n,a,r){return 1-(1-t)*(r+(1-n)*a)},c=function(t,n,a,r){return t*r+Math.min(t,n)*a},l=function(t,n,a,r){return t*r+Math.max(t,n)*a},d=function(t,n,a,r){return t-1+n},g=function(t,n,a,r){return t+n*a},m=function(t,n,a,r){return t+(2*n-1)},w=function(t,n,a,r){return 2*t-1+.5+(2*n-1)/2},p=function(t,n,a,r){return Math.abs(t-n)},C=function(t,n,a,r){return 1-((2*t-1)*(2*n-1)+1)/2},_={normal:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,f,n,a)},multiply:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,u,n,a)},screen:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,v,n,a)},darken:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,c,n,a)},lighten:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,l,n,a)},linearBurn:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,d,n,a)},linearDodge:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,g,n,a)},linearLight:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,m,n,a)},overlay:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,w,n,a)},difference:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,p,n,a)},exclusion:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(t,C,n,a)},_combine:function(t,n){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=this.clone(),e=i.uint8,o=t.uint8,s=i.width*i.height,h=a,f=1-a,u=0;u<s;++u)for(var v=0;v<r;++v){var c=4*u+v;e[c]=255*n(e[c]/255,o[c]/255,h,f)}return i}},y=a("kwsk"),b={name:"Fft",data:function(){return{loaders:[{id:"gradientPaint()",generator:h.factoryGradientPaint()},{id:"sinePaint(4)",generator:h.factorySinePaint(4)},{id:"gaussianSpotPaint()",generator:h.factoryGaussianSpotPaint()},{id:"checkPaint(8)",generator:h.factoryCheckPaint(8)},{id:"softSpotPaint(1, 0.5, 0.3, 0.3)",generator:h.factorySoftSpotPaint(1,.5,.3,.3)},{id:"spotPaint(0.8, 0, 0)",generator:h.factorySpotPaint(.8,0,0)}]}},beforeDestroy:function(){this.destroyChildObjects()},mounted:function(){var t=this;"undefined"==typeof jest&&(this.loadAllCanvas(),this.addImageRow("lena","/static/sample-images/lena.png"),this.addImageRow("clown","/static/sample-images/clown.jpg"),this.addImageRow("twigs","/static/sample-images/twigs.jpg"),this.loadAndResizeBuffer("/static/sample-images/lena.png",function(n){var a=i()(new e.a(80,80),s);a.loadFromUnknownType(h.factoryGaussianSpotPaint()),n=i()(n,_),t.addBufferRow("normal(lena, spot, 0.5)",n.normal(a,.5)),t.addBufferRow("multiply(lena, spot, 0.5)",n.multiply(a,.5)),t.addBufferRow("screen(lena, spot, 0.5)",n.screen(a,.5)),t.addBufferRow("darken(lena, spot, 0.5)",n.darken(a,.5)),t.addBufferRow("lighten(lena, spot, 0.5)",n.lighten(a,.5)),t.addBufferRow("linearBurn(lena, spot, 0.5)",n.linearBurn(a,.5)),t.addBufferRow("linearDodge(lena, spot, 0.5)",n.linearDodge(a,.5)),t.addBufferRow("linearLight(lena, spot, 0.5)",n.linearLight(a,.5)),t.addBufferRow("overlay(lena, spot, 0.5)",n.overlay(a,.5)),t.addBufferRow("difference(lena, spot, 0.5)",n.difference(a,.5)),t.addBufferRow("exclusion(lena, spot, 0.5)",n.exclusion(a,.5))}),this.constantly=Object(y.a)(function(){return t.loadAllCanvas()},5))},methods:{destroyChildObjects:function(){this.constantly&&this.constantly.destroy()},addImageRow:function(t,n){var a=this,r={id:t};this.loaders.push(r),this.loadAndResizeBuffer(n,function(n){r.generator=n.uint32,a.addBufferRow(t+"-buffer",n)})},loadAndResizeBuffer:function(t,n){e.a.createFromImageUrl(t,function(t){t.resizeTo(80,80),n(t)})},addBufferRow:function(t,n){this.loaders.push({id:t,generator:n.uint32})},loadAllCanvas:function(){var t=this;this.loaders.forEach(function(n,a){n.generator&&!n.origCanvas&&(n.origCanvas=t.$refs["origCanvas_"+a][0],n.histogramCanvas=t.$refs["histogramCanvas_"+a][0],n.histograLogmCanvas=t.$refs["histogramLogCanvas_"+a][0],n.line35Canvas=t.$refs["line35Canvas_"+a][0],n.line50Canvas=t.$refs["line50Canvas_"+a][0],n.line20Canvas=t.$refs["line20Canvas_"+a][0],t.loadCanvas(n))})},loadCanvas:function(t){var n=i()(new e.a(80,80),s);n.loadFromUnknownType(t.generator),n.toCanvas(t.origCanvas),n.histogram().toCanvas(t.histogramCanvas),n.histogram(!0).toCanvas(t.histograLogmCanvas),n.plotLine(35).toCanvas(t.line35Canvas),n.plotLine(50).toCanvas(t.line50Canvas),n.plotLine(20).toCanvas(t.line20Canvas)}}},k={render:function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("section",[a("h1",[t._v("Histogram")]),t._v(" "),a("p",[t._v("Experiments with image generation, image combines and Histogram in javascript.")]),t._v(" "),a("div",{staticClass:"row"},t._l(t.loaders,function(n,r){return a("figure",{key:n.id},[a("h2",[t._v(t._s(n.id))]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._v("\n          Original"),a("br"),t._v(" "),a("canvas",{ref:"origCanvas_"+r,refInFor:!0,staticClass:"orig-canvas",attrs:{width:"100",height:"100"}})]),t._v(" "),a("div",{staticClass:"col"},[t._v("\n          Histogram"),a("br"),t._v(" "),a("canvas",{ref:"histogramCanvas_"+r,refInFor:!0,staticClass:"histogram-canvas",attrs:{width:"100",height:"100"}})]),t._v(" "),a("div",{staticClass:"col"},[t._v("\n          Log10 Hist."),a("br"),t._v(" "),a("canvas",{ref:"histogramLogCanvas_"+r,refInFor:!0,staticClass:"histogram-log-canvas",attrs:{width:"100",height:"100"}})])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._v("\n          Line 20"),a("br"),t._v(" "),a("canvas",{ref:"line20Canvas_"+r,refInFor:!0,staticClass:"line-20-canvas",attrs:{width:"100",height:"100"}})]),t._v(" "),a("div",{staticClass:"col"},[t._v("\n          Line 35"),a("br"),t._v(" "),a("canvas",{ref:"line35Canvas_"+r,refInFor:!0,staticClass:"line-35-canvas",attrs:{width:"100",height:"100"}})]),t._v(" "),a("div",{staticClass:"col"},[t._v("\n          Line 50"),a("br"),t._v(" "),a("canvas",{ref:"line50Canvas_"+r,refInFor:!0,staticClass:"line-50-canvas",attrs:{width:"100",height:"100"}})])])])}))])},staticRenderFns:[]};var P=a("VU/8")(b,k,!1,function(t){a("vv2h")},"data-v-7d61295c",null);n.default=P.exports}});
//# sourceMappingURL=9.9f0a8e610662a98c5978.js.map