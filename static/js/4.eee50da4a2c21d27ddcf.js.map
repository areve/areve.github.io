{"version":3,"sources":["webpack:///./node_modules/core-js/library/modules/core.is-iterable.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack:///./src/assets/chess-core.js","webpack:///./src/assets/chess-validate.js","webpack:///./src/assets/chess.js","webpack:///src/components/Chess.vue","webpack:///./src/components/Chess.vue?dcc2","webpack:///./src/components/Chess.vue","webpack:///src/components/ChessBoard.vue","webpack:///./src/components/ChessBoard.vue?abd6","webpack:///./src/components/ChessBoard.vue","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/fn/is-iterable.js","webpack:///./node_modules/babel-runtime/core-js/array/from.js","webpack:///./node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/babel-runtime/core-js/is-iterable.js"],"names":["classof","__webpack_require__","ITERATOR","Iterators","module","exports","isIterable","it","O","Object","undefined","hasOwnProperty","Array","from","__esModule","obj","_from","_from2","default","arr","isArray","i","arr2","length","black","white","movesAreEqual","moveRefA","moveRefB","moveToString","parseMove","moveRef","move","promoteSuffix","promoteTo","toRef","to","_moveRef$split","split","_moveRef$split2","slicedToArray_default","both","_both$split","_both$split2","result","parseRef","moveBy","diff","_parseRef","x","y","_parseRef2","dx","dy","moveTo","ref","a","b","c","d","e","f","g","h","refsAreEqual","refA","refB","_parseRef3","colorOf","piece","indexOf","pieceAt","board","_parseRef4","colorAt","blackAt","whiteAt","emptyAt","pieceHasMoved","log","find","setPieceAt","value","boardAfter","slice","_parseRef5","row","substr","applyMove","x1","_parseRef7","x2","y2","toLowerCase","_parseRef9","getMovesInDirection","singleStep","moves","color","ix","iy","canLandOn","push","canPassThrough","getMovesFrom","apply","toConsumableArray_default","getWhitePawnThreats","getWhitePawnMoves","getBlackPawnThreats","_parseRef6","getBlackPawnMoves","getRookThreats","getQueenThreats","getBishopThreats","getKnightThreats","getKingThreats","opponentColor","isThreatenedByColor","getKingMoves","getThreatsFrom","lastMove","enPassantRightMove","enPassantLeftMove","filterMovesIntoCheck","movesToTry","forEach","isInCheck","isMoveIntoCheck","king","findPiece","canMoveOnTurn","canMove","getPossibleMovesFor","chooseMove","getPossibleMoves","Math","random","logMove","capture","promotionSuffix","enPassantSuffix","ambiguities","filter","threatsByPieceTo","rankAmbiguities","disambiguate","toUpperCase","Chess","name","components","ChessBoard","data","selected","humanLog","playRandom","status","aiPlaysBlack","aiPlaysWhite","autoRestart","turnDelay","gameOver","showPromoteToDialog","computed","moveCount","this","boardRender","map","replace","boardString","join","gameLog","turn","highlight","last","mounted","reset","methods","clickSquare","go","blackInCheck","whiteInCheck","_this","sort","allPiecesSorted","test","clearTimeout","timeout","setTimeout","act","_this2","delay","actNow","components_Chess","render","_vm","_h","$createElement","_c","_self","_v","_m","_e","_s","attrs","on","directives","rawName","expression","type","domProps","checked","_i","change","$event","$$a","$$el","target","$$c","$$i","concat","or","id","placeholder","input","composing","click","staticClass","class","show","aria-hidden","tabindex","role","data-dismiss","aria-label","staticRenderFns","title","href","Component","normalizeComponent","ssrContext","__webpack_exports__","components_ChessBoard","_l","key","square","getHighlight","props","$emit","coord","ArrayProto","prototype","_isIterable3","_interopRequireDefault","_getIterator3","_arr","_n","_d","next","done","err","sliceIterator","TypeError","SAFE_CLOSING","riter","exec","skipClosing","safe","iter","$defineProperty","createDesc","object","index","anObject","iterator","fn","entries","ret","call","ctx","$export","toObject","isArrayIter","toLength","createProperty","getIterFn","S","F","arrayLike","step","C","aLen","arguments","mapfn","mapping","iterFn"],"mappings":"yCAAA,IAAAA,EAAAC,EAAA,QACAC,EAAAD,EAAA,OAAAA,CAAA,YACAE,EAAAF,EAAA,QACAG,EAAAC,QAAAJ,EAAA,QAAAK,WAAA,SAAAC,GACA,IAAAC,EAAAC,OAAAF,GACA,YAAAG,IAAAF,EAAAN,IACA,eAAAM,GAEAL,EAAAQ,eAAAX,EAAAQ,6BCRAP,EAAA,QACAA,EAAA,QACAG,EAAAC,QAAAJ,EAAA,QAAAW,MAAAC,6DCAAR,EAAAS,YAAA,EAEA,IAIAC,EAJAC,EAAAf,EAAA,QAEAgB,GAEAF,EAFAC,IAEsCD,EAAAD,WAAAC,GAAuCG,QAAAH,GAE7EV,EAAAa,QAAA,SAAAC,GACA,GAAAP,MAAAQ,QAAAD,GAAA,CACA,QAAAE,EAAA,EAAAC,EAAAV,MAAAO,EAAAI,QAA6CF,EAAAF,EAAAI,OAAgBF,IAC7DC,EAAAD,GAAAF,EAAAE,GAGA,OAAAC,EAEA,SAAAL,EAAAC,SAAAC,kJClBMK,EAAQ,QACRC,EAAQ,QAEd,SAASC,EAAeC,EAAUC,GAChC,OAAOC,EAAaC,EAAUH,MAAeE,EAAaC,EAAUF,IAGtE,SAASC,EAAcE,GACrB,IAAMC,EAAOF,EAAUC,GACjBE,EAAgBD,EAAKE,UAAY,IAAMF,EAAKE,UAAY,GAC9D,OAAOC,EAAMH,EAAKnB,MAAQ,IAAMsB,EAAMH,EAAKI,IAAMH,EAGnD,SAASH,EAAWC,GAClB,GAAuB,iBAAZA,EAAsB,KAAAM,EACLN,EAAQO,MAAM,KADTC,EAAAC,IAAAH,EAAA,GACxBI,EADwBF,EAAA,GAClBL,EADkBK,EAAA,GAAAG,EAEZD,EAAKH,MAAM,KAFCK,EAAAH,IAAAE,EAAA,GAExB7B,EAFwB8B,EAAA,GAElBP,EAFkBO,EAAA,GAGzBC,GAAW/B,KAAMgC,EAAShC,GAAOuB,GAAIS,EAAST,IAIpD,OAHIF,IACFU,EAAOV,UAAYA,GAEdU,EAEP,OAAOb,EAIX,SAASe,EAAQjC,EAAMkC,EAAMb,GAAW,IAAAc,EACvBH,EAAShC,GAAjBoC,EAD+BD,EAC/BC,EAAGC,EAD4BF,EAC5BE,EAD4BC,EAEfN,EAASE,GAAtBK,EAF4BD,EAE/BF,EAAUI,EAFqBF,EAExBD,EACRN,GACJ/B,KAAMgC,EAAShC,GACfuB,GAAIS,GAAUI,EAAIG,EAAIF,EAAIG,KAG5B,OADInB,IAAWU,EAAOV,UAAYA,GAC3BU,EAGT,SAASU,EAAQzC,EAAMuB,GACrB,OACEvB,KAAMgC,EAAShC,GACfuB,GAAIS,EAAST,IAIjB,SAASS,EAAUU,GACjB,GAAmB,iBAARA,EAAkB,CAI3B,OAASN,GAFPO,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GAEpBR,EAAI,IAAKL,EAAGK,EAAI,GAAK,GAC3C,OAAI3C,MAAMQ,QAAQmC,IACfN,EAAGM,EAAI,GAAIL,EAAGK,EAAI,IAEnBA,EAIX,SAASS,EAAcC,EAAMC,GAC3B,IAAMV,EAAIX,EAASoB,GACbR,EAAIZ,EAASqB,GACnB,OAAO/B,EAAMqB,KAAOrB,EAAMsB,GAG5B,SAAStB,EAAOoB,GACd,GAAY,OAARA,EAAc,OAAO,KACzB,IAFmBY,EAGJtB,EAASU,GAAjBN,EAHYkB,EAGZlB,EAAGC,EAHSiB,EAGTjB,EACV,MAFuB,WAEDD,IAAMC,EAAI,GAGlC,SAASkB,EAASC,GAGhB,OAAoC,IAFhB,SAEJC,QAAQD,GAAsB7C,GACV,IAFhB,SAEJ8C,QAAQD,GAAsB5C,EACvC4C,EAGT,SAASE,EAASC,EAAOjB,GAAK,IAAAkB,EACb5B,EAASU,GAAjBN,EADqBwB,EACrBxB,EACP,OAAOuB,EAAM,EAFeC,EAClBvB,GACUD,GAGtB,SAASyB,EAASF,EAAOjB,GACvB,OAAOa,EAAQG,EAAQC,EAAOjB,IAGhC,SAASoB,EAASH,EAAOjB,GACvB,OAAOmB,EAAQF,EAAOjB,KAAS/B,EAGjC,SAASoD,EAASJ,EAAOjB,GACvB,OAAOmB,EAAQF,EAAOjB,KAAS9B,EAGjC,SAASoD,EAASL,EAAOjB,GACvB,MAA+B,MAAxBgB,EAAQC,EAAOjB,GAGxB,SAASuB,EAAeN,EAAOO,EAAKxB,EAAKc,GACvC,QAASE,EAAQC,EAAOjB,KAASc,IAAUU,EAAIC,KAAK,SAAA/B,GAAA,OAAKe,EAAaf,EAAGM,MAG3E,SAAS0B,EAAYT,EAAOjB,EAAK2B,GAC/B,IAAMC,EAAaX,EAAMY,MAAM,GADOC,EAEzBxC,EAASU,GAAjBN,EAFiCoC,EAEjCpC,EAAGC,EAF8BmC,EAE9BnC,EAEFoC,EAAMH,EAAW,EAAIjC,GAG3B,OAFAiC,EAAW,EAAIjC,GAAKoC,EAAIC,OAAO,EAAGtC,GAAKiC,EAAQI,EAAIC,OAAOtC,EAAI,GAEvDkC,EAWT,SAASK,EAAWhB,EAAOzC,GACzB,IAAMC,EAAOF,EAAUC,GACjBsC,EAAQE,EAAQC,EAAOxC,EAAKnB,MAC9BsE,EAAaF,EAAWT,EAAOxC,EAAKnB,KAAM,KAG9C,GAFAsE,EAAaF,EAAWE,EAAYnD,EAAKI,GAAIiC,GAE/B,MAAVA,EACE3C,EAAcM,EAAM,SAEtBmD,EAAaF,EADbE,EAAaF,EAAWE,EAAY,KAAM,KACN,KAAM,KACjCzD,EAAcM,EAAM,WAE7BmD,EAAaF,EADbE,EAAaF,EAAWE,EAAY,KAAM,KACN,KAAM,WAEvC,GAAc,MAAVd,EACL3C,EAAcM,EAAM,SAEtBmD,EAAaF,EADbE,EAAaF,EAAWE,EAAY,KAAM,KACN,KAAM,KACjCzD,EAAcM,EAAM,WAE7BmD,EAAaF,EADbE,EAAaF,EAAWE,EAAY,KAAM,KACN,KAAM,WAEvC,GAAc,MAAVd,EAAe,KACdoB,EAAM5C,EAASb,EAAKnB,MAAvBoC,EADiByC,EAED7C,EAASb,EAAKI,IAA3BuD,EAFcD,EAEjBzC,EAAU2C,EAFOF,EAEVxC,EACVuC,IAAOE,GAAMd,EAAQL,EAAOxC,EAAKI,IACnC+C,EAAaF,EAAWE,GAAaQ,EAAIC,EAAK,GAAI,KAClC,IAAPA,IACTT,EAAaF,EAAWE,GAAaQ,EAAIC,GAAK5D,EAAKE,UAAU2D,qBAE1D,GAAc,MAAVxB,EAAe,KACdoB,EAAM5C,EAASb,EAAKnB,MAAvBoC,EADiB6C,EAEDjD,EAASb,EAAKI,IAA3BuD,EAFcG,EAEjB7C,EAAU2C,EAFOE,EAEV5C,EACVuC,IAAOE,GAAMd,EAAQL,EAAOxC,EAAKI,IACnC+C,EAAaF,EAAWE,GAAaQ,EAAIC,EAAK,GAAI,KAClC,IAAPA,IACTT,EAAaF,EAAWE,GAAaQ,EAAIC,GAAK5D,EAAKE,YAGvD,OAAOiD,ECzJT,SAASY,EAAqBvB,EAAO3D,EAAMkC,EAAMiD,GAK/C,IAJA,IAAMC,KADqDjD,EAEpCH,EAASE,GAAtBK,EAFiDJ,EAEpDC,EAAUI,EAF0CL,EAE7CE,EACRgD,EAAQxB,EAAQF,EAAO3D,GAH8BsC,EAItCN,EAAShC,GAAtBsF,EAJmDhD,EAItDF,EAAUmD,EAJ4CjD,EAI/CD,EAGVkD,GAAU/C,KADV8C,GAAU/C,GAED,GAAKgD,EAAK,GAAKD,EAAK,GAAKC,EAAK,IACnCC,EAAU7B,EAAO0B,GAAQC,EAAIC,KAAMH,EAAMK,KAAKhD,EAAOzC,GAAOsF,EAAIC,KAChEJ,KACCO,EAAe/B,GAAQ2B,EAAIC,MAElC,OAAOH,EAGT,SAASI,EAAW7B,EAAO0B,EAAO3C,GAChC,OAAOsB,EAAQL,EAAOjB,IAAQmB,EAAQF,EAAOjB,KAAS2C,EAGxD,SAASK,EAAgB/B,EAAOjB,GAC9B,OAAOsB,EAAQL,EAAOjB,GAGxB,SAASiD,EAAchC,EAAOO,EAAKxB,GACjC,IAAM0C,KAWN,OAVAA,EAAMK,KAANG,MAAAR,EAAAS,IAAcC,EAAoBnC,EAAOO,EAAKxB,KAC9C0C,EAAMK,KAANG,MAAAR,EAAAS,IAqEF,SAA4BlC,EAAO3D,GACjC,IAAMoF,KAEN,GAAc,MADA1B,EAAQC,EAAO3D,GACV,OAAOoF,EAHa,IAAAxB,EAIxB5B,EAAShC,GAAjBoC,EAJgCwB,EAIhCxB,EAAGC,EAJ6BuB,EAI7BvB,EAEN2B,EAAQL,GAAQvB,EAAGC,EAAI,MACf,IAANA,GACF+C,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,MAChCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,MAChCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,MAChCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,OAEhCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,MAItB,IAANqC,GACA2B,EAAQL,GAAQvB,EAAGC,EAAI,KACvB2B,EAAQL,GAAQvB,EAAGC,EAAI,KACzB+C,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,KAG9B,OAAOoF,EA5FOW,CAAkBpC,EAAOjB,KACvC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcG,EAAoBrC,EAAOO,EAAKxB,KAC9C0C,EAAMK,KAANG,MAAAR,EAAAS,IA0IF,SAA4BlC,EAAO3D,GACjC,IAAMoF,KAEN,GAAc,MADA1B,EAAQC,EAAO3D,GACV,OAAOoF,EAHa,IAAAa,EAKxBjE,EAAShC,GAAjBoC,EALgC6D,EAKhC7D,EAAGC,EAL6B4D,EAK7B5D,EAEN2B,EAAQL,GAAQvB,EAAGC,EAAI,MACf,IAANA,GACF+C,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,OAEjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,MAIvB,IAANqC,GACA2B,EAAQL,GAAQvB,EAAGC,EAAI,KACvB2B,EAAQL,GAAQvB,EAAGC,EAAI,KACzB+C,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,KAG/B,OAAOoF,EAlKOc,CAAkBvC,EAAOjB,KACvC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcM,EAAexC,EAAOjB,KACpC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcO,EAAgBzC,EAAOjB,KACrC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcQ,EAAiB1C,EAAOjB,KACtC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcS,EAAiB3C,EAAOjB,KACtC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcU,EAAe5C,EAAOjB,KACpC0C,EAAMK,KAANG,MAAAR,EAAAS,IAmOF,SAAuBlC,EAAOO,EAAKlE,GACjC,IAAMoF,KACA5B,EAAQE,EAAQC,EAAO3D,GAC7B,GAAc,MAAVwD,GAA2B,MAAVA,EAAe,OAAO4B,EAE3C,IAAMC,EAAQ9B,EAAQC,GAChBgD,EAAgBnB,IAAU1E,EAAQC,EAAQD,EAE3C8F,EAAoB9C,EAAO3D,EAAMwG,KAChCnB,IAAUzE,EACPqD,EAAcN,EAAOO,EAAK,KAAM,OAC9BD,EAAcN,EAAOO,EAAK,KAAM,OACjCF,EAAQL,GAAQ,EAAG,MACnBK,EAAQL,GAAQ,EAAG,KAClB8C,EAAoB9C,GAAQ,EAAG,GAAI6C,IACnCC,EAAoB9C,GAAQ,EAAG,GAAI6C,IACtCpB,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,IAAI,MAGpDiE,EAAcN,EAAOO,EAAK,KAAM,MACjCF,EAAQL,GAAQ,EAAG,KACnBK,EAAQL,GAAQ,EAAG,KACnBK,EAAQL,GAAQ,EAAG,MAClB8C,EAAoB9C,GAAQ,EAAG,GAAI6C,KACnCC,EAAoB9C,GAAQ,EAAG,GAAI6C,IACtCpB,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,IAAI,MAIvDiE,EAAcN,EAAOO,EAAK,KAAM,OAC9BD,EAAcN,EAAOO,EAAK,KAAM,OACjCF,EAAQL,GAAQ,EAAG,MACnBK,EAAQL,GAAQ,EAAG,KAClB8C,EAAoB9C,GAAQ,EAAG,GAAI6C,IACnCC,EAAoB9C,GAAQ,EAAG,GAAI6C,IACtCpB,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,IAAI,MAGpDiE,EAAcN,EAAOO,EAAK,KAAM,MACjCF,EAAQL,GAAQ,EAAG,KACnBK,EAAQL,GAAQ,EAAG,KACnBK,EAAQL,GAAQ,EAAG,MAClB8C,EAAoB9C,GAAQ,EAAG,GAAI6C,KACnCC,EAAoB9C,GAAQ,EAAG,GAAI6C,IACtCpB,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,IAAI,OAMhE,OAAOoF,EArROsB,CAAa/C,EAAOO,EAAKxB,KAChC0C,EAGT,SAASuB,EAAgBhD,EAAOO,EAAKxB,GACnC,IAAM0C,KAQN,OAPAA,EAAMK,KAANG,MAAAR,EAAAS,IAAcC,EAAoBnC,EAAOO,EAAKxB,KAC9C0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcG,EAAoBrC,EAAOO,EAAKxB,KAC9C0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcM,EAAexC,EAAOjB,KACpC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcO,EAAgBzC,EAAOjB,KACrC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcQ,EAAiB1C,EAAOjB,KACtC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcS,EAAiB3C,EAAOjB,KACtC0C,EAAMK,KAANG,MAAAR,EAAAS,IAAcU,EAAe5C,EAAOjB,KAC7B0C,EAGT,SAASU,EAAqBnC,EAAOO,EAAKlE,GACxC,IAAMoF,KAEN,GAAc,MADA1B,EAAQC,EAAO3D,GACV,OAAOoF,EAHoB,IAAA9B,EAK/BtB,EAAShC,GAAjBoC,EALuCkB,EAKvClB,EAAGC,EALoCiB,EAKpCjB,EAuBV,GArBID,EAAI,GAAK0B,EAAQH,GAAQvB,EAAI,EAAGC,EAAI,MAC5B,IAANA,GACF+C,EAAMK,KAAKxD,EAAOjC,IAAQ,EAAG,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,EAAG,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,EAAG,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,EAAG,GAAI,OAEjCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,EAAG,MAG7BoC,EAAI,GAAK0B,EAAQH,GAAQvB,EAAI,EAAGC,EAAI,MAC5B,IAANA,GACF+C,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,MAChCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,MAChCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,MAChCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,GAAI,OAEhCoF,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,MAI5BkE,GAAOA,EAAIxD,OAAQ,CACrB,IAAMkG,EAAW1C,EAAIA,EAAIxD,OAAS,GAC5BmG,EAAqB5E,GAAQG,EAAI,EAAGC,EAAI,IAAK,GAAI,IACjDyE,EAAoB7E,GAAQG,EAAI,EAAGC,EAAI,IAAK,GAAI,IACnB,MAA/BqB,EAAQC,GAAQvB,EAAI,EAAGC,KACvBxB,EAAc+F,EAAUC,IAC1BzB,EAAMK,KAAKxD,EAAOjC,GAAO,EAAG,KAEK,MAA/B0D,EAAQC,GAAQvB,EAAI,EAAGC,KACvBxB,EAAc+F,EAAUE,IAC1B1B,EAAMK,KAAKxD,EAAOjC,IAAQ,EAAG,KAIjC,OAAOoF,EA6BT,SAASY,EAAqBrC,EAAOO,EAAKlE,GACxC,IAAMoF,KAEN,GAAc,MADA1B,EAAQC,EAAO3D,GACV,OAAOoF,EAHoB,IAAAZ,EAK/BxC,EAAShC,GAAjBoC,EALuCoC,EAKvCpC,EAAGC,EALoCmC,EAKpCnC,EAuBV,GArBID,EAAI,GAAK2B,EAAQJ,GAAQvB,EAAI,EAAGC,EAAI,MAC5B,IAANA,GACF+C,EAAMK,KAAKxD,EAAOjC,IAAQ,GAAI,GAAI,MAClCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,GAAI,GAAI,MAClCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,GAAI,GAAI,MAClCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,GAAI,GAAI,OAElCoF,EAAMK,KAAKxD,EAAOjC,IAAQ,GAAI,MAG9BoC,EAAI,GAAK2B,EAAQJ,GAAQvB,EAAI,EAAGC,EAAI,MAC5B,IAANA,GACF+C,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,MACjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,GAAI,OAEjCoF,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,MAI7BkE,GAAOA,EAAIxD,OAAQ,CACrB,IAAMkG,EAAW1C,EAAIA,EAAIxD,OAAS,GAC5BmG,EAAqB5E,GAAQG,EAAI,EAAGC,EAAI,IAAK,EAAG,IAChDyE,EAAoB7E,GAAQG,EAAI,EAAGC,EAAI,IAAK,EAAG,IAClB,MAA/BqB,EAAQC,GAAQvB,EAAI,EAAGC,KACvBxB,EAAc+F,EAAUC,IAC1BzB,EAAMK,KAAKxD,EAAOjC,GAAO,GAAI,KAEI,MAA/B0D,EAAQC,GAAQvB,EAAI,EAAGC,KAC3BxB,EAAc+F,EAAUE,IACtB1B,EAAMK,KAAKxD,EAAOjC,IAAQ,GAAI,KAIlC,OAAOoF,EA8BT,SAASe,EAAgBxC,EAAO3D,GAC9B,IAAMoF,KACA5B,EAAQE,EAAQC,EAAO3D,GAC7B,MAAc,MAAVwD,GAA2B,MAAVA,EAAsB4B,GAC3CA,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,MACnDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,MACpDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,MACnDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,MAC7CoF,GAGT,SAASgB,EAAiBzC,EAAO3D,GAC/B,IAAMoF,KACA5B,EAAQE,EAAQC,EAAO3D,GAC7B,MAAc,MAAVwD,GAA2B,MAAVA,EAAsB4B,GAC3CA,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,MACnDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,MACpDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,MACnDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,MACpDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,MACnDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,GAAI,MACrDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,MACpDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,MAC7CoF,GAGT,SAASiB,EAAkB1C,EAAO3D,GAChC,IAAMoF,KACA5B,EAAQE,EAAQC,EAAO3D,GAC7B,MAAc,MAAVwD,GAA2B,MAAVA,EAAsB4B,GAC3CA,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,MACnDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,GAAI,MACrDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,MACpDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,MAC7CoF,GAGT,SAASkB,EAAkB3C,EAAO3D,GAChC,IAAMoF,KACA5B,EAAQE,EAAQC,EAAO3D,GAC7B,MAAc,MAAVwD,GAA2B,MAAVA,EAAsB4B,GAC3CA,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,IAAI,KACvDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,GAAI,IAAI,KACzDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,IAAI,KACvDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,GAAI,IAAI,KAClDoF,GAGT,SAASmB,EAAgB5C,EAAO3D,GAC9B,IAAMoF,KACA5B,EAAQE,EAAQC,EAAO3D,GAC7B,MAAc,MAAVwD,GAA2B,MAAVA,EAAsB4B,GAC3CA,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,IAAI,KACvDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,IAAI,KACvDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,EAAG,IAAI,KACvDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,GAAO,GAAI,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,EAAG,IAAI,KACxDoF,EAAMK,KAANG,MAAAR,EAAAS,IAAcX,EAAoBvB,EAAO3D,IAAQ,GAAI,IAAI,KAElDoF,GAwDT,SAAS2B,EAAsBpD,EAAOqD,GACpC,IAAM5B,KAIN,OAHA4B,EAAWC,QAAQ,SAAA9F,IAMrB,SAA0BwC,EAAOzC,GAC/B,IAAMC,EAAOF,EAAUC,GACjBoD,EAAaK,EAAUhB,EAAOxC,GAC9BkE,EAAQxB,EAAQF,EAAOxC,EAAKnB,MAClC,OAAOkH,EAAU5C,EAAYe,IATtB8B,CAAgBxD,EAAOxC,IAAOiE,EAAMK,KAAKtE,KAEzCiE,EAUT,SAASqB,EAAqB9C,EAAOjB,EAAK2C,GAExC,IADA,IAAMD,KACGE,EAAK,EAAGA,GAAM,EAAGA,IACxB,IAAK,IAAIC,EAAK,EAAGA,GAAM,EAAGA,IACpB1B,EAAQF,GAAQ2B,EAAIC,MAASF,GAC/BD,EAAMK,KAANG,MAAAR,EAAAS,IAAcc,EAAehD,MAAY2B,EAAIC,MAKnD,QAASH,EAAMjB,KAAK,SAAA/B,GAAA,OAAKe,EAAaf,EAAEb,GAAImB,KAgB9C,SAASwE,EAAWvD,EAAO0B,GACzB,IAAM+B,ED3PR,SAAoBzD,EAAOH,GACzB,IAAK,IAAIpB,EAAI,EAAGA,GAAK,EAAGA,IACtB,IAAK,IAAIC,EAAI,EAAGA,GAAK,EAAGA,IACtB,GAAIqB,EAAQC,GAAQvB,EAAGC,MAAQmB,EAAO,OAAQpB,IAAGC,KCwPxCgF,CAAU1D,EAAO0B,IAAU1E,EAAQ,IAAM,KAEtD,QAAIyG,GAEKX,EAAoB9C,EAAOyD,EADZ/B,IAAU1E,EAAQC,EAAQD,GAOpD,SAAS2G,EAAe3D,EAAOO,EAAKhD,GAClC,IAAMC,EAAOF,EAAUC,GAGvB,OAFc2C,EAAQF,EAAOxC,EAAKnB,SACrBkE,EAAIxD,OAAS,EAAIC,EAAQC,IAKxC,SAAkB+C,EAAOO,EAAKhD,GAC5B,IAAMC,EAAOF,EAAUC,GACjBkE,EAAQO,EAAahC,EAAOO,EAAK/C,EAAKnB,MAE5C,QADqB+G,EAAqBpD,EAAOyB,GAC3BjB,KAAK,SAAA/B,GAAA,OAAKvB,EAAcuB,EAAGjB,KAP1CoG,CAAQ5D,EAAOO,EAAK/C,GAe7B,SAASqG,EAAqB7D,EAAO0B,EAAOnB,GAE1C,IADA,IAAMkB,KACGE,EAAK,EAAGA,GAAM,EAAGA,IACxB,IAAK,IAAIC,EAAK,EAAGA,GAAM,EAAGA,IACnBvB,EAAQL,GAAQ2B,EAAIC,KAAQ1B,EAAQF,GAAQ2B,EAAIC,MAASF,GAC5DD,EAAMK,KAANG,MAAAR,EAAAS,IAAcF,EAAahC,EAAOO,GAAMoB,EAAIC,MAMlD,OADqBwB,EAAqBpD,EAAOyB,GChYnD,SAASqC,EAAY9D,EAAOO,GAC1B,IAAMkB,EDgXR,SAA2BzB,EAAOO,GAEhC,OAAOsD,EAAoB7D,EADbO,EAAIxD,OAAS,EAAIC,EAAQC,EACEsD,GClX3BwD,CAAiB/D,EAAOO,GACtC,OAAKkB,EAAM1E,OACE0E,KAASuC,KAAKC,SAAWxC,EAAM1E,SADlB,KAK5B,SAASmH,EAASlE,EAAOzC,GACvB,IAAMC,EAAOF,EAAUC,GACjBsC,EAAQE,EAAQC,EAAOxC,EAAKnB,MAC5B8H,EAAU9D,EAAQL,EAAOxC,EAAKI,IAAM,GAAK,IAE/C,GAAc,MAAViC,GAA2B,MAAVA,EAAe,CAClC,IAAMuE,EAAkB5G,EAAKE,UAAY,IAAMF,EAAKE,UAAY,GAChE,GAAIF,EAAKnB,KAAKoC,IAAMjB,EAAKI,GAAGa,EAC1B,OAAOd,EAAMH,EAAKI,IAAMwG,EAExB,IAAMC,EAA8B,KAAZF,EAAiB,OAAS,GAClD,OAAOxG,EAAMH,EAAKnB,MAAM,GAAK,IAAMsB,EAAMH,EAAKI,IAAMwG,EAAkBC,EAI1E,GAAc,MAAVxE,EAAe,CACjB,GAAI3C,EAAcM,EAAM,SAAU,MAAO,MACzC,GAAIN,EAAcM,EAAM,SAAU,MAAO,aACpC,GAAc,MAAVqC,EAAe,CACxB,GAAI3C,EAAcM,EAAM,SAAU,MAAO,MACzC,GAAIN,EAAcM,EAAM,SAAU,MAAO,QAG3C,IAAM8G,ED4SR,SAA2BtE,EAAOH,EAAOd,GAEvC,IADA,IAAM0C,KACGE,EAAK,EAAGA,GAAM,EAAGA,IACxB,IAAK,IAAIC,EAAK,EAAGA,GAAM,EAAGA,IACpB7B,EAAQC,GAAQ2B,EAAIC,MAAS/B,GAC/B4B,EAAMK,KAANG,MAAAR,EAAAS,IAAcc,EAAehD,MAAY2B,EAAIC,MAKnD,OAAOH,EAAM8C,OAAO,SAAA9F,GAAA,OAAKe,EAAaf,EAAEb,GAAImB,KCtTxByF,CAAiBxE,EAAOH,EAAOrC,EAAKI,IAClD6G,EAAkBH,EAAYC,OAAO,SAAA9F,GAAA,OAAKA,EAAEpC,KAAKqC,IAAMlB,EAAKnB,KAAKqC,IAGnEgG,SAeJ,OAZIA,EALoBJ,EAAYC,OAAO,SAAA9F,GAAA,OAAKA,EAAEpC,KAAKoC,IAAMjB,EAAKnB,KAAKoC,IAGnD1B,OAAS,EACvB0H,EAAgB1H,OAAS,EACZY,EAAMH,EAAKnB,MAEXsB,EAAMH,EAAKnB,MAAM,GAG9BiI,EAAYvH,OAAS,EACRY,EAAMH,EAAKnB,MAAM,GAEjB,GAIZwD,EAAM8E,cAAgBD,EAAeP,EAAUxG,EAAMH,EAAKI,IC6CnE,IAAAgH,GACAC,KAAA,QACAC,YAAAC,aAAA,GACAC,KAHA,WAIA,OACAxH,KAAA,GACAwC,SACAiF,SAAA,KACA1E,OACA2E,YACAC,YAAA,EACAC,OAAA,GACAC,cAAA,EACAC,cAAA,EACAC,aAAA,EACAC,WAAA,EACAC,UAAA,EACAC,qBAAA,IAGAC,UACAC,UADA,WAEA,YAAAC,KAAAtF,IAAAxD,OAAA,IAEA+I,YAJA,WAKA,OAAAD,KAAA7F,MAAA+F,IAAA,SAAAtH,GAAA,OAAAA,EAAAuH,QAAA,WAAAlI,MAAA,OAEAmI,YAPA,WAQA,OAAAJ,KAAA7F,MAAAkG,KAAA,OAEAC,QAVA,WAaA,IAFA,IAAA/H,KACAvB,EAAA,EACAgJ,KAAAX,SAAAnI,OAAAF,GAAA,CACA,IAAAI,EAAA4I,KAAAX,SAAArI,GACAG,EAAA6I,KAAAX,SAAAnI,OAAAF,EAAA,EAAAgJ,KAAAX,SAAArI,EAAA,MACAuJ,EAAA,KAAAvJ,EAAA,GACAuB,EAAA0D,KAAAsE,EAAA,KAAAnJ,EAAA,IAAAD,EAAA,MACAH,GAAA,EAEA,OAAAuB,EAAA8H,KAAA,KAEAE,KAtBA,WAuBA,OAAAP,KAAAtF,IAAAxD,OAAA,mBAEAsJ,UAzBA,WA0BA,IAAAjI,KACA,GAAAyH,KAAAtF,IAAAxD,OAAA,CACA,IAAAuJ,EAAAhJ,EAAAuI,KAAAtF,IAAAsF,KAAAtF,IAAAxD,OAAA,IACAqB,EAAA0D,KAAAwE,EAAAjK,MACA+B,EAAA0D,KAAAwE,EAAA1I,IAEA,OAAAQ,IAGAmI,QAvDA,WAwDAV,KAAAW,SAEAC,SACAC,YADA,SACA3H,GFgRA,IAA0BiB,EAAOzC,EACzBC,EEhRR,OAAAqI,KAAAZ,UACAY,KAAArI,KAAAG,EAAAoB,GAAA,IACA8G,KAAAZ,SAAAlG,IAEA8G,KAAArI,KAAAqI,KAAArI,KAAAG,EAAAoB,GF2Q0BiB,EE1Q1B6F,KAAA7F,MF0QiCzC,EE1QjCsI,KAAArI,KF2QQA,EAAOF,EAAUC,GACW,MAA9BwC,EAAQC,EAAOxC,EAAKnB,OAA+B,IAAdmB,EAAKI,GAAGc,GAGf,MAA9BqB,EAAQC,EAAOxC,EAAKnB,OAA+B,IAAdmB,EAAKI,GAAGc,EE9QnDmH,KAAAH,qBAAA,EAEAG,KAAAc,GAAAd,KAAArI,QAIAE,UAdA,SAcAmC,GACAgG,KAAAH,qBAAA,EACA7F,GACAgG,KAAArI,KAAAqI,KAAArI,KAAA,IAAAqC,EACAgG,KAAAc,GAAAd,KAAArI,QAEAqI,KAAArI,KAAA,GACAqI,KAAAZ,SAAA,OAGA0B,GAxBA,SAwBApJ,GAAA,IFwNkByC,EACV4G,EACAC,EE1NRC,EAAAjB,KACArI,EAAAF,EAAAC,GACAoG,EAAAkC,KAAA7F,MAAA6F,KAAAtF,IAAA/C,KACAqI,KAAAX,SAAApD,KACAoC,EAAA2B,KAAA7F,MAAAxC,IACAH,EAAAG,GAAAmH,eAEAkB,KAAA7F,MAAAgB,EAAA6E,KAAA7F,MAAAxC,GACAqI,KAAAtF,IAAAuB,KAAAtE,GACAqI,KAAAT,QF+MkBpF,EE/MlB6F,KAAA7F,MFgNQ4G,EAAerD,EAAUvD,EAAOhD,GAChC6J,EAAetD,EAAUvD,EAAO/C,GAClC2J,GAAgBC,EAAqB,0BACrCD,EACE/C,EAAoB7D,EAAOhD,MAAWD,OACjC,oBAEA,sBAGP8J,EACEhD,EAAoB7D,EAAO/C,MAAWF,OACjC,oBAEA,sBAIN8G,EAAoB7D,EAAOhD,MAAWD,OAGtC8G,EAAoB7D,EAAO/C,MAAWF,OAIZ,OA9BjC,SAA0BiD,GACxB,OAAOA,EAAMkG,KAAK,IAAIF,QAAQ,MAAO,IAAIlI,MAAM,IAAIiJ,OAAOb,KAAK,IA6B3Dc,CAAgBhH,GACX,yBAGF,KAPE,oBAHA,qBElOX,aAAAiH,KAAApB,KAAAT,UACAS,KAAAJ,UAAA,IAGAI,KAAArI,KAAA,GACAqI,KAAAZ,SAAA,KACAiC,aAAArB,KAAAsB,SACAtB,KAAAsB,QAAAC,WAAA,WACAN,EAAAO,OACAxB,KAAAL,UAAA,QAEAgB,MA7CA,WA8CAX,KAAA7F,OACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YAEA6F,KAAAtF,OACAsF,KAAAX,YACAW,KAAAT,OAAA,KACAS,KAAAJ,UAAA,EACAI,KAAAwB,OAEAA,IA9DA,WA8DA,IAAAC,EAAAzB,KACA,IAAAA,KAAAJ,WAEA,UAAAI,KAAAO,MAAAP,KAAAP,cACA,UAAAO,KAAAO,MAAAP,KAAAR,cACA,CACA,IAAA7H,EAAAsG,EAAA+B,KAAA7F,MAAA6F,KAAAtF,KACA,OAAA/C,EACAqI,KAAAJ,UAAA,EAEAI,KAAAc,GAAAnJ,GAKA,GAAAqI,KAAAJ,UAAAI,KAAAN,YAAA,CACA,IAAAgC,EAAA,aAAAN,KAAApB,KAAAT,QAAA,QACA8B,aAAArB,KAAAsB,SACAtB,KAAAsB,QAAAC,WAAA,WACAE,EAAA/B,aACA+B,EAAAd,SACAe,KAGAC,OAtFA,WAuFAN,aAAArB,KAAAsB,SACAtB,KAAAwB,SClQAI,GADiBC,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,WAAAA,EAAA,MAAAH,EAAAK,GAAA,WAAAL,EAAAK,GAAA,KAAAF,EAAA,KAAAH,EAAAK,GAAA,iMAAAL,EAAAK,GAAA,KAAAL,EAAAM,GAAA,GAAAN,EAAAK,GAAA,KAAAF,EAAA,MAAAH,EAAAvC,OAAAuC,EAAAO,KAAAJ,EAAA,QAAAH,EAAAK,GAAAL,EAAAQ,GAAAR,EAAAvB,MAAA,cAAAuB,EAAAK,GAAA,KAAAL,EAAA,OAAAG,EAAA,QAAAH,EAAAK,GAAAL,EAAAQ,GAAAR,EAAAvC,WAAAuC,EAAAO,OAAAP,EAAAK,GAAA,KAAAF,EAAA,eAAyeM,OAAO/B,UAAAsB,EAAAtB,UAAApB,SAAA0C,EAAA1C,SAAAjF,MAAA2H,EAAA7B,aAA0EuC,IAAK3B,YAAAiB,EAAAjB,eAA+BiB,EAAAK,GAAA,KAAAF,EAAA,YAAAA,EAAA,SAAAA,EAAA,SAAqDQ,aAAazD,KAAA,QAAA0D,QAAA,UAAA7H,MAAAiH,EAAA,aAAAa,WAAA,iBAAkFJ,OAASK,KAAA,YAAkBC,UAAWC,QAAAvM,MAAAQ,QAAA+K,EAAAtC,cAAAsC,EAAAiB,GAAAjB,EAAAtC,aAAA,SAAAsC,EAAA,cAA8FU,IAAKQ,QAAA,SAAAC,GAA2B,IAAAC,EAAApB,EAAAtC,aAAA2D,EAAAF,EAAAG,OAAAC,IAAAF,EAAAL,QAA4E,GAAAvM,MAAAQ,QAAAmM,GAAA,CAAuB,IAAAI,EAAAxB,EAAAiB,GAAAG,EAAA,MAAiCC,EAAAL,QAAiBQ,EAAA,IAAAxB,EAAAtC,aAAA0D,EAAAK,QAAlD,QAAmGD,GAAA,IAAAxB,EAAAtC,aAAA0D,EAAAnI,MAAA,EAAAuI,GAAAC,OAAAL,EAAAnI,MAAAuI,EAAA,UAA2ExB,EAAAtC,aAAA6D,GAAsBvB,EAAAH,WAAcG,EAAAK,GAAA,wCAAAL,EAAAK,GAAA,KAAAF,EAAA,SAAAA,EAAA,SAAqFQ,aAAazD,KAAA,QAAA0D,QAAA,UAAA7H,MAAAiH,EAAA,aAAAa,WAAA,iBAAkFJ,OAASK,KAAA,YAAkBC,UAAWC,QAAAvM,MAAAQ,QAAA+K,EAAArC,cAAAqC,EAAAiB,GAAAjB,EAAArC,aAAA,SAAAqC,EAAA,cAA8FU,IAAKQ,QAAA,SAAAC,GAA2B,IAAAC,EAAApB,EAAArC,aAAA0D,EAAAF,EAAAG,OAAAC,IAAAF,EAAAL,QAA4E,GAAAvM,MAAAQ,QAAAmM,GAAA,CAAuB,IAAAI,EAAAxB,EAAAiB,GAAAG,EAAA,MAAiCC,EAAAL,QAAiBQ,EAAA,IAAAxB,EAAArC,aAAAyD,EAAAK,QAAlD,QAAmGD,GAAA,IAAAxB,EAAArC,aAAAyD,EAAAnI,MAAA,EAAAuI,GAAAC,OAAAL,EAAAnI,MAAAuI,EAAA,UAA2ExB,EAAArC,aAAA4D,GAAsBvB,EAAAH,WAAcG,EAAAK,GAAA,wCAAAL,EAAAK,GAAA,KAAAF,EAAA,SAAAA,EAAA,SAAqFQ,aAAazD,KAAA,QAAA0D,QAAA,UAAA7H,MAAAiH,EAAA,YAAAa,WAAA,gBAAgFJ,OAASK,KAAA,YAAkBC,UAAWC,QAAAvM,MAAAQ,QAAA+K,EAAApC,aAAAoC,EAAAiB,GAAAjB,EAAApC,YAAA,SAAAoC,EAAA,aAA2FU,IAAKQ,QAAA,SAAAC,GAA2B,IAAAC,EAAApB,EAAApC,YAAAyD,EAAAF,EAAAG,OAAAC,IAAAF,EAAAL,QAA2E,GAAAvM,MAAAQ,QAAAmM,GAAA,CAAuB,IAAAI,EAAAxB,EAAAiB,GAAAG,EAAA,MAAiCC,EAAAL,QAAiBQ,EAAA,IAAAxB,EAAApC,YAAAwD,EAAAK,QAAlD,QAAkGD,GAAA,IAAAxB,EAAApC,YAAAwD,EAAAnI,MAAA,EAAAuI,GAAAC,OAAAL,EAAAnI,MAAAuI,EAAA,UAA0ExB,EAAApC,YAAA2D,GAAqBvB,EAAAH,WAAcG,EAAAK,GAAA,gDAAAL,EAAAK,GAAA,KAAAF,EAAA,SAAAA,EAAA,SAA6FQ,aAAazD,KAAA,QAAA0D,QAAA,UAAA7H,MAAAiH,EAAA,UAAAa,WAAA,cAA4EJ,OAASK,KAAA,YAAkBC,UAAWC,QAAAvM,MAAAQ,QAAA+K,EAAAnC,WAAAmC,EAAAiB,GAAAjB,EAAAnC,UAAA,SAAAmC,EAAA,WAAqFU,IAAKQ,QAAA,SAAAC,GAA2B,IAAAC,EAAApB,EAAAnC,UAAAwD,EAAAF,EAAAG,OAAAC,IAAAF,EAAAL,QAAyE,GAAAvM,MAAAQ,QAAAmM,GAAA,CAAuB,IAAAI,EAAAxB,EAAAiB,GAAAG,EAAA,MAAiCC,EAAAL,QAAiBQ,EAAA,IAAAxB,EAAAnC,UAAAuD,EAAAK,QAAlD,QAAgGD,GAAA,IAAAxB,EAAAnC,UAAAuD,EAAAnI,MAAA,EAAAuI,GAAAC,OAAAL,EAAAnI,MAAAuI,EAAA,UAAwExB,EAAAnC,UAAA0D,GAAmBvB,EAAAH,WAAcG,EAAAK,GAAA,gCAAAL,EAAAK,GAAA,KAAAF,EAAA,YAAAA,EAAA,SAAgFM,OAAOiB,GAAA,UAAa1B,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAF,EAAA,SAA2CQ,aAAazD,KAAA,QAAA0D,QAAA,UAAA7H,MAAAiH,EAAA,KAAAa,WAAA,SAAkEJ,OAASkB,GAAA,OAAAb,KAAA,OAAAc,YAAA,kBAAA7I,MAAA,IAAqEgI,UAAWhI,MAAAiH,EAAA,MAAmBU,IAAKmB,MAAA,SAAAV,GAAyBA,EAAAG,OAAAQ,YAAsC9B,EAAAnK,KAAAsL,EAAAG,OAAAvI,WAA+BiH,EAAAK,GAAA,KAAAF,EAAA,UAA2BM,OAAOK,KAAA,UAAgBJ,IAAKqB,MAAA,SAAAZ,GAAyBnB,EAAAhB,GAAAgB,EAAAnK,UAAmBmK,EAAAK,GAAA,QAAAL,EAAAK,GAAA,KAAAF,EAAA,UAA0CM,OAAOK,KAAA,UAAgBJ,IAAKqB,MAAA,SAAAZ,GAAyBnB,EAAAnB,YAAcmB,EAAAK,GAAA,aAAAL,EAAAK,GAAA,KAAAF,EAAA,OAAAH,EAAAK,GAAAL,EAAAQ,GAAAR,EAAA1B,gBAAA0B,EAAAK,GAAA,KAAAF,EAAA,KAAAH,EAAAK,GAAA,QAAAL,EAAAQ,GAAAR,EAAA/B,cAAA+B,EAAAK,GAAA,KAAAF,EAAA,KAAAH,EAAAK,GAAA,aAAAL,EAAAQ,GAAAR,EAAAxB,YAAAwB,EAAAK,GAAA,KAAAF,EAAA,OAA+N6B,YAAA,QAAAC,OAA2BC,KAAAlC,EAAAjC,qBAAgC0C,OAAQ0B,eAAAnC,EAAAjC,oBAAAqE,SAAA,KAAAC,KAAA,YAAwElC,EAAA,OAAY6B,YAAA,kBAA4BhC,EAAAK,GAAA,KAAAF,EAAA,OAAwB6B,YAAA,qCAAAvB,OAAwD4B,KAAA,cAAmBlC,EAAA,OAAY6B,YAAA,kBAA4B7B,EAAA,OAAY6B,YAAA,iBAA2B7B,EAAA,MAAW6B,YAAA,gBAA0BhC,EAAAK,GAAA,iBAAAL,EAAAK,GAAA,KAAAF,EAAA,UAAmD6B,YAAA,QAAAvB,OAA2BK,KAAA,SAAAwB,eAAA,QAAAC,aAAA,SAA4D7B,IAAKqB,MAAA,SAAAZ,GAAyBnB,EAAAjK,gBAAkBoK,EAAA,QAAaM,OAAO0B,cAAA,UAAsBnC,EAAAK,GAAA,WAAAL,EAAAK,GAAA,KAAAF,EAAA,OAA0C6B,YAAA,2BAAqC7B,EAAA,UAAeO,IAAIqB,MAAA,SAAAZ,GAAyBnB,EAAAjK,UAAA,SAAqBiK,EAAAK,GAAA,OAAAL,EAAAK,GAAA,KAAAF,EAAA,UAAyCO,IAAIqB,MAAA,SAAAZ,GAAyBnB,EAAAjK,UAAA,SAAqBiK,EAAAK,GAAA,OAAAL,EAAAK,GAAA,KAAAF,EAAA,UAAyCO,IAAIqB,MAAA,SAAAZ,GAAyBnB,EAAAjK,UAAA,SAAqBiK,EAAAK,GAAA,OAAAL,EAAAK,GAAA,KAAAF,EAAA,UAAyCO,IAAIqB,MAAA,SAAAZ,GAAyBnB,EAAAjK,UAAA,SAAqBiK,EAAAK,GAAA,oBAEzgKmC,iBADjB,WAAoC,IAAavC,EAAb/B,KAAagC,eAA0BC,EAAvCjC,KAAuCkC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,KAA/DjC,KAA+DmC,GAAA,4CAAAF,EAAA,QAA6EM,OAAOgC,MAAA,6BAAnJvE,KAAsLmC,GAAA,SAAtLnC,KAAsLmC,GAAA,sCAAAF,EAAA,KAAuEM,OAAOiC,KAAA,sCAApQxE,KAA+SmC,GAAA,UAA/SnC,KAA+SmC,GAAA,UCEnV,IAcAsC,EAdA7O,EAAA,OAcA8O,CACA3F,EACA6C,GATA,EAVA,SAAA+C,GACA/O,EAAA,SAaA,kBAEA,MAUAgP,EAAA,QAAAH,EAAA,2CCiCA,ICxDAI,GADiBhD,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,QAAAH,EAAAgD,GAAAhD,EAAA,eAAA7G,EAAApC,GAA+D,OAAAoJ,EAAA,MAAgB8C,IAAAlM,GAAMiJ,EAAAgD,GAAA,WAAAE,EAAApM,GAAiC,OAAAqJ,EAAA,MAAgB8C,IAAAnM,EAAAmL,MAAAjC,EAAAmD,cAA8BrM,IAAAC,EAAA,EAAAA,IAAc2J,IAAMqB,MAAA,SAAAZ,GAAyBnB,EAAAjB,aAAiBjI,IAAAC,EAAA,EAAAA,QAAkB,MAAAmM,EAAA/C,EAAA,QAA8B6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,EAAA/C,EAAA,QAA4C6B,YAAA,UAAoBhC,EAAAK,GAAA,aAAA6C,GAAA,MAAAA,EAAA/C,EAAA,QAAAA,EAAA,QAAyE6B,YAAA,UAAoBhC,EAAAK,GAAAL,EAAAQ,GAAA0C,iBAE3oCV,oBCCjB,IAcAG,EAdA7O,EAAA,OAcA8O,EF2CAQ,OAAA,gCACA/F,KAFA,WAGA,UAEAyB,SACAC,YADA,SACA3H,GACA8G,KAAAmF,MAAA,cAAAjM,IAEA+L,aAJA,SAIA/L,GACA,IAAAX,KAWA,OAVAyH,KAAAQ,WACAR,KAAAQ,UAAA/C,QAAA,SAAA2H,GACAA,EAAAxM,IAAAM,EAAAN,GAAAwM,EAAAvM,IAAAK,EAAAL,IACAN,EAAAiI,WAAA,KAIAR,KAAAZ,UAAAY,KAAAZ,SAAAxG,IAAAM,EAAAN,GAAAoH,KAAAZ,SAAAvG,IAAAK,EAAAL,IACAN,EAAA6G,UAAA,GAEA7G,KE7DAsM,GATA,EAVA,SAAAF,GACA/O,EAAA,SAaA,kBAEA,MAUAgP,EAAA,EAAAH,EAAA,8BCzBA,IAAA3O,EAAAF,EAAA,QACAC,EAAAD,EAAA,OAAAA,CAAA,YACAyP,EAAA9O,MAAA+O,UAEAvP,EAAAC,QAAA,SAAAE,GACA,YAAAG,IAAAH,IAAAJ,EAAAS,QAAAL,GAAAmP,EAAAxP,KAAAK,0BCNAN,EAAA,QACAA,EAAA,QACAG,EAAAC,QAAAJ,EAAA,gCCFAG,EAAAC,SAAkBa,QAAAjB,EAAA,QAAAa,YAAA,sCCElBT,EAAAS,YAAA,EAEA,IAEA8O,EAAAC,EAFA5P,EAAA,SAMA6P,EAAAD,EAFA5P,EAAA,SAIA,SAAA4P,EAAA9O,GAAsC,OAAAA,KAAAD,WAAAC,GAAuCG,QAAAH,GAE7EV,EAAAa,QAAA,WA2BA,gBAAAC,EAAAE,GACA,GAAAT,MAAAQ,QAAAD,GACA,OAAAA,EACK,MAAAyO,EAAA1O,SAAAT,OAAAU,IACL,OA9BA,SAAAA,EAAAE,GACA,IAAA0O,KACAC,GAAA,EACAC,GAAA,EACAvD,OAAAhM,EAEA,IACA,QAAAiM,EAAAS,GAAA,EAAA0C,EAAA5O,SAAAC,KAAwD6O,GAAArD,EAAAS,EAAA8C,QAAAC,QACxDJ,EAAAzJ,KAAAqG,EAAAzH,QAEA7D,GAAA0O,EAAAxO,SAAAF,GAHuF2O,GAAA,IAKlF,MAAAI,GACLH,GAAA,EACAvD,EAAA0D,EACK,QACL,KACAJ,GAAA5C,EAAA,QAAAA,EAAA,SACO,QACP,GAAA6C,EAAA,MAAAvD,GAIA,OAAAqD,EAOAM,CAAAlP,EAAAE,GAEA,UAAAiP,UAAA,yDAjCA,yBCdA,IAAApQ,EAAAD,EAAA,OAAAA,CAAA,YACAsQ,GAAA,EAEA,IACA,IAAAC,GAAA,GAAAtQ,KACAsQ,EAAA,kBAAiCD,GAAA,GAEjC3P,MAAAC,KAAA2P,EAAA,WAAiC,UAChC,MAAA5M,IAEDxD,EAAAC,QAAA,SAAAoQ,EAAAC,GACA,IAAAA,IAAAH,EAAA,SACA,IAAAI,GAAA,EACA,IACA,IAAAxP,GAAA,GACAyP,EAAAzP,EAAAjB,KACA0Q,EAAAV,KAAA,WAA6B,OAASC,KAAAQ,GAAA,IACtCxP,EAAAjB,GAAA,WAAiC,OAAA0Q,GACjCH,EAAAtP,GACG,MAAAyC,IACH,OAAA+M,sCCnBA,IAAAE,EAAA5Q,EAAA,QACA6Q,EAAA7Q,EAAA,QAEAG,EAAAC,QAAA,SAAA0Q,EAAAC,EAAA9L,GACA8L,KAAAD,EAAAF,EAAAhN,EAAAkN,EAAAC,EAAAF,EAAA,EAAA5L,IACA6L,EAAAC,GAAA9L,yBCLA,IAAA+L,EAAAhR,EAAA,QACAG,EAAAC,QAAA,SAAA6Q,EAAAC,EAAAjM,EAAAkM,GACA,IACA,OAAAA,EAAAD,EAAAF,EAAA/L,GAAA,GAAAA,EAAA,IAAAiM,EAAAjM,GAEG,MAAAtB,GACH,IAAAyN,EAAAH,EAAA,OAEA,WADAxQ,IAAA2Q,GAAAJ,EAAAI,EAAAC,KAAAJ,IACAtN,4DCRA,IAAA2N,EAAAtR,EAAA,QACAuR,EAAAvR,EAAA,QACAwR,EAAAxR,EAAA,QACAqR,EAAArR,EAAA,QACAyR,EAAAzR,EAAA,QACA0R,EAAA1R,EAAA,QACA2R,EAAA3R,EAAA,QACA4R,EAAA5R,EAAA,QAEAuR,IAAAM,EAAAN,EAAAO,GAAA9R,EAAA,OAAAA,CAAA,SAAA2Q,GAA4EhQ,MAAAC,KAAA+P,KAAoB,SAEhG/P,KAAA,SAAAmR,GACA,IAOAzQ,EAAAqB,EAAAqP,EAAAf,EAPA1Q,EAAAiR,EAAAO,GACAE,EAAA,mBAAA7H,UAAAzJ,MACAuR,EAAAC,UAAA7Q,OACA8Q,EAAAF,EAAA,EAAAC,UAAA,QAAA1R,EACA4R,OAAA5R,IAAA2R,EACArB,EAAA,EACAuB,EAAAV,EAAArR,GAIA,GAFA8R,IAAAD,EAAAd,EAAAc,EAAAF,EAAA,EAAAC,UAAA,QAAA1R,EAAA,IAEAA,MAAA6R,GAAAL,GAAAtR,OAAA8Q,EAAAa,GAMA,IAAA3P,EAAA,IAAAsP,EADA3Q,EAAAoQ,EAAAnR,EAAAe,SACkCA,EAAAyP,EAAgBA,IAClDY,EAAAhP,EAAAoO,EAAAsB,EAAAD,EAAA7R,EAAAwQ,MAAAxQ,EAAAwQ,SANA,IAAAE,EAAAqB,EAAAjB,KAAA9Q,GAAAoC,EAAA,IAAAsP,IAAuDD,EAAAf,EAAAhB,QAAAC,KAAgCa,IACvFY,EAAAhP,EAAAoO,EAAAsB,EAAAhB,EAAAJ,EAAAmB,GAAAJ,EAAA/M,MAAA8L,IAAA,GAAAiB,EAAA/M,OASA,OADAtC,EAAArB,OAAAyP,EACApO,6BClCAxC,EAAAC,SAAkBa,QAAAjB,EAAA,QAAAa,YAAA","file":"static/js/4.eee50da4a2c21d27ddcf.js","sourcesContent":["var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.is-iterable.js\n// module id = 5PlU\n// module chunks = 4","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/from.js\n// module id = 5zde\n// module chunks = 4","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/toConsumableArray.js\n// module id = Gu7T\n// module chunks = 4","const black = 'black'\r\nconst white = 'white'\r\n\r\nfunction movesAreEqual (moveRefA, moveRefB) {\r\n  return moveToString(parseMove(moveRefA)) === moveToString(parseMove(moveRefB))\r\n}\r\n\r\nfunction moveToString (moveRef) {\r\n  const move = parseMove(moveRef)\r\n  const promoteSuffix = move.promoteTo ? '=' + move.promoteTo : ''\r\n  return toRef(move.from) + '-' + toRef(move.to) + promoteSuffix\r\n}\r\n\r\nfunction parseMove (moveRef) {\r\n  if (typeof moveRef === 'string') {\r\n    const [both, promoteTo] = moveRef.split('=')\r\n    const [from, to] = both.split('-')\r\n    const result = { from: parseRef(from), to: parseRef(to) }\r\n    if (promoteTo) {\r\n      result.promoteTo = promoteTo\r\n    }\r\n    return result\r\n  } else {\r\n    return moveRef\r\n  }\r\n}\r\n\r\nfunction moveBy (from, diff, promoteTo) {\r\n  const {x, y} = parseRef(from)\r\n  const {x: dx, y: dy} = parseRef(diff)\r\n  const result = {\r\n    from: parseRef(from),\r\n    to: parseRef([x + dx, y + dy])\r\n  }\r\n  if (promoteTo) result.promoteTo = promoteTo\r\n  return result\r\n}\r\n\r\nfunction moveTo (from, to) {\r\n  return {\r\n    from: parseRef(from),\r\n    to: parseRef(to)\r\n  }\r\n}\r\n\r\nfunction parseRef (ref) {\r\n  if (typeof ref === 'string') {\r\n    const alphaToNumeric = {\r\n      a: 0, b: 1, c: 2, d: 3, e: 4, f: 5, g: 6, h: 7\r\n    }\r\n    return { x: alphaToNumeric[ref[0]], y: ref[1] - 1 }\r\n  } else if (Array.isArray(ref)) {\r\n    return {x: ref[0], y: ref[1]}\r\n  } else {\r\n    return ref\r\n  }\r\n}\r\n\r\nfunction refsAreEqual (refA, refB) {\r\n  const a = parseRef(refA)\r\n  const b = parseRef(refB)\r\n  return toRef(a) === toRef(b)\r\n}\r\n\r\nfunction toRef (ref) {\r\n  if (ref === null) return null\r\n  const numericToAlpha = 'abcdefgh'\r\n  const {x, y} = parseRef(ref)\r\n  return numericToAlpha[x] + (y + 1)\r\n}\r\n\r\nfunction colorOf (piece) {\r\n  const blackPieces = 'rnbkqp'\r\n  const whitePieces = 'RNBKQP'\r\n  if (blackPieces.indexOf(piece) !== -1) return black\r\n  if (whitePieces.indexOf(piece) !== -1) return white\r\n  return piece\r\n}\r\n\r\nfunction pieceAt (board, ref) {\r\n  const {x, y} = parseRef(ref)\r\n  return board[7 - y][x]\r\n}\r\n\r\nfunction colorAt (board, ref) {\r\n  return colorOf(pieceAt(board, ref))\r\n}\r\n\r\nfunction blackAt (board, ref) {\r\n  return colorAt(board, ref) === black\r\n}\r\n\r\nfunction whiteAt (board, ref) {\r\n  return colorAt(board, ref) === white\r\n}\r\n\r\nfunction emptyAt (board, ref) {\r\n  return pieceAt(board, ref) === '.'\r\n}\r\n\r\nfunction pieceHasMoved (board, log, ref, piece) {\r\n  return !(pieceAt(board, ref) === piece && !log.find(x => refsAreEqual(x, ref)))\r\n}\r\n\r\nfunction setPieceAt (board, ref, value) {\r\n  const boardAfter = board.slice(0)\r\n  let {x, y} = parseRef(ref)\r\n\r\n  const row = boardAfter[7 - y]\r\n  boardAfter[7 - y] = row.substr(0, x) + value + row.substr(x + 1)\r\n\r\n  return boardAfter\r\n}\r\n\r\nfunction findPiece (board, piece) {\r\n  for (let x = 0; x <= 7; x++) {\r\n    for (let y = 0; y <= 7; y++) {\r\n      if (pieceAt(board, [x, y]) === piece) return {x, y}\r\n    }\r\n  }\r\n}\r\n\r\nfunction applyMove (board, moveRef) {\r\n  const move = parseMove(moveRef)\r\n  const piece = pieceAt(board, move.from)\r\n  let boardAfter = setPieceAt(board, move.from, '.')\r\n  boardAfter = setPieceAt(boardAfter, move.to, piece)\r\n\r\n  if (piece === 'k') {\r\n    if (movesAreEqual(move, 'e8-g8')) {\r\n      boardAfter = setPieceAt(boardAfter, 'h8', '.')\r\n      boardAfter = setPieceAt(boardAfter, 'f8', 'r')\r\n    } else if (movesAreEqual(move, 'e8-c8')) {\r\n      boardAfter = setPieceAt(boardAfter, 'a8', '.')\r\n      boardAfter = setPieceAt(boardAfter, 'd8', 'r')\r\n    }\r\n  } else if (piece === 'K') {\r\n    if (movesAreEqual(move, 'e1-g1')) {\r\n      boardAfter = setPieceAt(boardAfter, 'h1', '.')\r\n      boardAfter = setPieceAt(boardAfter, 'f1', 'R')\r\n    } else if (movesAreEqual(move, 'e1-c1')) {\r\n      boardAfter = setPieceAt(boardAfter, 'a1', '.')\r\n      boardAfter = setPieceAt(boardAfter, 'd1', 'R')\r\n    }\r\n  } else if (piece === 'p') {\r\n    const {x: x1} = parseRef(move.from)\r\n    const {x: x2, y: y2} = parseRef(move.to)\r\n    if (x1 !== x2 && emptyAt(board, move.to)) {\r\n      boardAfter = setPieceAt(boardAfter, [x2, y2 + 1], '.')\r\n    } else if (y2 === 0) {\r\n      boardAfter = setPieceAt(boardAfter, [x2, y2], move.promoteTo.toLowerCase())\r\n    }\r\n  } else if (piece === 'P') {\r\n    const {x: x1} = parseRef(move.from)\r\n    const {x: x2, y: y2} = parseRef(move.to)\r\n    if (x1 !== x2 && emptyAt(board, move.to)) {\r\n      boardAfter = setPieceAt(boardAfter, [x2, y2 - 1], '.')\r\n    } else if (y2 === 7) {\r\n      boardAfter = setPieceAt(boardAfter, [x2, y2], move.promoteTo)\r\n    }\r\n  }\r\n  return boardAfter\r\n}\r\n\r\nexport {\r\n  white, black, parseRef, toRef, colorOf, pieceAt,\r\n  colorAt, blackAt, whiteAt, emptyAt, moveBy,\r\n  moveTo, pieceHasMoved, setPieceAt, findPiece,\r\n  parseMove, moveToString, movesAreEqual, applyMove, refsAreEqual\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/chess-core.js","import {\r\n  white, black, parseRef, toRef, colorOf, pieceAt,\r\n  colorAt, blackAt, whiteAt, emptyAt, moveBy,\r\n  moveTo, pieceHasMoved, findPiece,\r\n  parseMove, moveToString, movesAreEqual, applyMove,\r\n  refsAreEqual\r\n} from './chess-core'\r\n\r\nfunction getMovesInDirection (board, from, diff, singleStep) {\r\n  const moves = []\r\n  const {x: dx, y: dy} = parseRef(diff)\r\n  const color = colorAt(board, from)\r\n  let {x: ix, y: iy} = parseRef(from)\r\n  while (true) {\r\n    ix = ix + dx\r\n    iy = iy + dy\r\n    if (ix > 7 || iy > 7 || ix < 0 || iy < 0) break\r\n    if (canLandOn(board, color, [ix, iy])) moves.push(moveTo(from, [ix, iy]))\r\n    if (singleStep) break\r\n    if (!canPassThrough(board, [ix, iy])) break\r\n  }\r\n  return moves\r\n}\r\n\r\nfunction canLandOn (board, color, ref) {\r\n  return emptyAt(board, ref) || colorAt(board, ref) !== color\r\n}\r\n\r\nfunction canPassThrough (board, ref) {\r\n  return emptyAt(board, ref)\r\n}\r\n\r\nfunction getMovesFrom (board, log, ref) {\r\n  const moves = []\r\n  moves.push(...getWhitePawnThreats(board, log, ref))\r\n  moves.push(...getWhitePawnMoves(board, ref))\r\n  moves.push(...getBlackPawnThreats(board, log, ref))\r\n  moves.push(...getBlackPawnMoves(board, ref))\r\n  moves.push(...getRookThreats(board, ref))\r\n  moves.push(...getQueenThreats(board, ref))\r\n  moves.push(...getBishopThreats(board, ref))\r\n  moves.push(...getKnightThreats(board, ref))\r\n  moves.push(...getKingThreats(board, ref))\r\n  moves.push(...getKingMoves(board, log, ref))\r\n  return moves\r\n}\r\n\r\nfunction getThreatsFrom (board, log, ref) {\r\n  const moves = []\r\n  moves.push(...getWhitePawnThreats(board, log, ref))\r\n  moves.push(...getBlackPawnThreats(board, log, ref))\r\n  moves.push(...getRookThreats(board, ref))\r\n  moves.push(...getQueenThreats(board, ref))\r\n  moves.push(...getBishopThreats(board, ref))\r\n  moves.push(...getKnightThreats(board, ref))\r\n  moves.push(...getKingThreats(board, ref))\r\n  return moves\r\n}\r\n\r\nfunction getWhitePawnThreats (board, log, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'P') return moves\r\n\r\n  const {x, y} = parseRef(from)\r\n\r\n  if (x > 0 && blackAt(board, [x - 1, y + 1])) {\r\n    if (y === 6) {\r\n      moves.push(moveBy(from, [-1, 1], 'Q'))\r\n      moves.push(moveBy(from, [-1, 1], 'R'))\r\n      moves.push(moveBy(from, [-1, 1], 'B'))\r\n      moves.push(moveBy(from, [-1, 1], 'N'))\r\n    } else {\r\n      moves.push(moveBy(from, [-1, 1]))\r\n    }\r\n  }\r\n  if (x < 7 && blackAt(board, [x + 1, y + 1])) {\r\n    if (y === 6) {\r\n      moves.push(moveBy(from, [1, 1], 'Q'))\r\n      moves.push(moveBy(from, [1, 1], 'R'))\r\n      moves.push(moveBy(from, [1, 1], 'B'))\r\n      moves.push(moveBy(from, [1, 1], 'N'))\r\n    } else {\r\n      moves.push(moveBy(from, [1, 1]))\r\n    }\r\n  }\r\n\r\n  if (log && log.length) {\r\n    const lastMove = log[log.length - 1]\r\n    const enPassantRightMove = moveBy([x + 1, y + 2], [0, -2])\r\n    const enPassantLeftMove = moveBy([x - 1, y + 2], [0, -2])\r\n    if (pieceAt(board, [x + 1, y]) === 'p' &&\r\n        movesAreEqual(lastMove, enPassantRightMove)) {\r\n      moves.push(moveBy(from, [1, 1]))\r\n    }\r\n    if (pieceAt(board, [x - 1, y]) === 'p' &&\r\n        movesAreEqual(lastMove, enPassantLeftMove)) {\r\n      moves.push(moveBy(from, [-1, 1]))\r\n    }\r\n  }\r\n\r\n  return moves\r\n}\r\n\r\nfunction getWhitePawnMoves (board, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'P') return moves\r\n  const {x, y} = parseRef(from)\r\n\r\n  if (emptyAt(board, [x, y + 1])) {\r\n    if (y === 6) {\r\n      moves.push(moveBy(from, [0, 1], 'Q'))\r\n      moves.push(moveBy(from, [0, 1], 'R'))\r\n      moves.push(moveBy(from, [0, 1], 'B'))\r\n      moves.push(moveBy(from, [0, 1], 'N'))\r\n    } else {\r\n      moves.push(moveBy(from, [0, 1]))\r\n    }\r\n  }\r\n\r\n  if (y === 1 &&\r\n      emptyAt(board, [x, y + 1]) &&\r\n      emptyAt(board, [x, y + 2])) {\r\n    moves.push(moveBy(from, [0, 2]))\r\n  }\r\n\r\n  return moves\r\n}\r\n\r\nfunction getBlackPawnThreats (board, log, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'p') return moves\r\n\r\n  const {x, y} = parseRef(from)\r\n\r\n  if (x > 0 && whiteAt(board, [x - 1, y - 1])) {\r\n    if (y === 1) {\r\n      moves.push(moveBy(from, [-1, -1], 'Q'))\r\n      moves.push(moveBy(from, [-1, -1], 'R'))\r\n      moves.push(moveBy(from, [-1, -1], 'B'))\r\n      moves.push(moveBy(from, [-1, -1], 'N'))\r\n    } else {\r\n      moves.push(moveBy(from, [-1, -1]))\r\n    }\r\n  }\r\n  if (x < 7 && whiteAt(board, [x + 1, y - 1])) {\r\n    if (y === 1) {\r\n      moves.push(moveBy(from, [1, -1], 'Q'))\r\n      moves.push(moveBy(from, [1, -1], 'R'))\r\n      moves.push(moveBy(from, [1, -1], 'B'))\r\n      moves.push(moveBy(from, [1, -1], 'N'))\r\n    } else {\r\n      moves.push(moveBy(from, [1, -1]))\r\n    }\r\n  }\r\n\r\n  if (log && log.length) {\r\n    const lastMove = log[log.length - 1]\r\n    const enPassantRightMove = moveBy([x + 1, y - 2], [0, 2])\r\n    const enPassantLeftMove = moveBy([x - 1, y - 2], [0, 2])\r\n    if (pieceAt(board, [x + 1, y]) === 'P' &&\r\n        movesAreEqual(lastMove, enPassantRightMove)) {\r\n      moves.push(moveBy(from, [1, -1]))\r\n    }\r\n    if (pieceAt(board, [x - 1, y]) === 'P' &&\r\n    movesAreEqual(lastMove, enPassantLeftMove)) {\r\n      moves.push(moveBy(from, [-1, -1]))\r\n    }\r\n  }\r\n\r\n  return moves\r\n}\r\n\r\nfunction getBlackPawnMoves (board, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'p') return moves\r\n\r\n  const {x, y} = parseRef(from)\r\n\r\n  if (emptyAt(board, [x, y - 1])) {\r\n    if (y === 1) {\r\n      moves.push(moveBy(from, [0, -1], 'Q'))\r\n      moves.push(moveBy(from, [0, -1], 'R'))\r\n      moves.push(moveBy(from, [0, -1], 'B'))\r\n      moves.push(moveBy(from, [0, -1], 'N'))\r\n    } else {\r\n      moves.push(moveBy(from, [0, -1]))\r\n    }\r\n  }\r\n\r\n  if (y === 6 &&\r\n      emptyAt(board, [x, y - 1]) &&\r\n      emptyAt(board, [x, y - 2])) {\r\n    moves.push(moveBy(from, [0, -2]))\r\n  }\r\n\r\n  return moves\r\n}\r\n\r\nfunction getRookThreats (board, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'r' && piece !== 'R') return moves\r\n  moves.push(...getMovesInDirection(board, from, [1, 0]))\r\n  moves.push(...getMovesInDirection(board, from, [-1, 0]))\r\n  moves.push(...getMovesInDirection(board, from, [0, 1]))\r\n  moves.push(...getMovesInDirection(board, from, [0, -1]))\r\n  return moves\r\n}\r\n\r\nfunction getQueenThreats (board, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'q' && piece !== 'Q') return moves\r\n  moves.push(...getMovesInDirection(board, from, [1, 0]))\r\n  moves.push(...getMovesInDirection(board, from, [-1, 0]))\r\n  moves.push(...getMovesInDirection(board, from, [0, 1]))\r\n  moves.push(...getMovesInDirection(board, from, [0, -1]))\r\n  moves.push(...getMovesInDirection(board, from, [1, 1]))\r\n  moves.push(...getMovesInDirection(board, from, [-1, -1]))\r\n  moves.push(...getMovesInDirection(board, from, [1, -1]))\r\n  moves.push(...getMovesInDirection(board, from, [-1, 1]))\r\n  return moves\r\n}\r\n\r\nfunction getBishopThreats (board, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'b' && piece !== 'B') return moves\r\n  moves.push(...getMovesInDirection(board, from, [1, 1]))\r\n  moves.push(...getMovesInDirection(board, from, [-1, -1]))\r\n  moves.push(...getMovesInDirection(board, from, [1, -1]))\r\n  moves.push(...getMovesInDirection(board, from, [-1, 1]))\r\n  return moves\r\n}\r\n\r\nfunction getKnightThreats (board, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'n' && piece !== 'N') return moves\r\n  moves.push(...getMovesInDirection(board, from, [2, 1], true))\r\n  moves.push(...getMovesInDirection(board, from, [2, -1], true))\r\n  moves.push(...getMovesInDirection(board, from, [-2, 1], true))\r\n  moves.push(...getMovesInDirection(board, from, [-2, -1], true))\r\n  moves.push(...getMovesInDirection(board, from, [1, 2], true))\r\n  moves.push(...getMovesInDirection(board, from, [1, -2], true))\r\n  moves.push(...getMovesInDirection(board, from, [-1, 2], true))\r\n  moves.push(...getMovesInDirection(board, from, [-1, -2], true))\r\n  return moves\r\n}\r\n\r\nfunction getKingThreats (board, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'k' && piece !== 'K') return moves\r\n  moves.push(...getMovesInDirection(board, from, [0, 1], true))\r\n  moves.push(...getMovesInDirection(board, from, [0, -1], true))\r\n  moves.push(...getMovesInDirection(board, from, [1, 0], true))\r\n  moves.push(...getMovesInDirection(board, from, [-1, 0], true))\r\n  moves.push(...getMovesInDirection(board, from, [1, 1], true))\r\n  moves.push(...getMovesInDirection(board, from, [1, -1], true))\r\n  moves.push(...getMovesInDirection(board, from, [-1, 1], true))\r\n  moves.push(...getMovesInDirection(board, from, [-1, -1], true))\r\n\r\n  return moves\r\n}\r\n\r\nfunction getKingMoves (board, log, from) {\r\n  const moves = []\r\n  const piece = pieceAt(board, from)\r\n  if (piece !== 'k' && piece !== 'K') return moves\r\n\r\n  const color = colorOf(piece)\r\n  const opponentColor = color === black ? white : black\r\n\r\n  if (!isThreatenedByColor(board, from, opponentColor)) {\r\n    if (color === white) {\r\n      if (!pieceHasMoved(board, log, 'e1', 'K')) {\r\n        if (!pieceHasMoved(board, log, 'h1', 'R') &&\r\n            emptyAt(board, [5, 0]) &&\r\n            emptyAt(board, [6, 0]) &&\r\n            !isThreatenedByColor(board, [5, 0], opponentColor) &&\r\n            !isThreatenedByColor(board, [6, 0], opponentColor)) {\r\n          moves.push(...getMovesInDirection(board, from, [2, 0], true))\r\n        }\r\n\r\n        if (!pieceHasMoved(board, log, 'a1', 'R') &&\r\n            emptyAt(board, [1, 0]) &&\r\n            emptyAt(board, [2, 0]) &&\r\n            emptyAt(board, [3, 0]) &&\r\n            !isThreatenedByColor(board, [2, 0], opponentColor) &&\r\n            !isThreatenedByColor(board, [3, 0], opponentColor)) {\r\n          moves.push(...getMovesInDirection(board, from, [-2, 0], true))\r\n        }\r\n      }\r\n    } else {\r\n      if (!pieceHasMoved(board, log, 'e8', 'k')) {\r\n        if (!pieceHasMoved(board, log, 'h8', 'r') &&\r\n            emptyAt(board, [5, 7]) &&\r\n            emptyAt(board, [6, 7]) &&\r\n            !isThreatenedByColor(board, [5, 7], opponentColor) &&\r\n            !isThreatenedByColor(board, [6, 7], opponentColor)) {\r\n          moves.push(...getMovesInDirection(board, from, [2, 0], true))\r\n        }\r\n\r\n        if (!pieceHasMoved(board, log, 'a8', 'r') &&\r\n            emptyAt(board, [1, 7]) &&\r\n            emptyAt(board, [2, 7]) &&\r\n            emptyAt(board, [3, 7]) &&\r\n            !isThreatenedByColor(board, [2, 7], opponentColor) &&\r\n            !isThreatenedByColor(board, [3, 7], opponentColor)) {\r\n          moves.push(...getMovesInDirection(board, from, [-2, 0], true))\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return moves\r\n}\r\n\r\nfunction filterMovesIntoCheck (board, movesToTry) {\r\n  const moves = []\r\n  movesToTry.forEach(move => {\r\n    if (!isMoveIntoCheck(board, move)) moves.push(move)\r\n  })\r\n  return moves\r\n}\r\n\r\nfunction isMoveIntoCheck (board, moveRef) {\r\n  const move = parseMove(moveRef)\r\n  const boardAfter = applyMove(board, move)\r\n  const color = colorAt(board, move.from)\r\n  return isInCheck(boardAfter, color)\r\n}\r\n\r\nfunction isThreatenedByColor (board, ref, color) {\r\n  const moves = []\r\n  for (let ix = 0; ix <= 7; ix++) {\r\n    for (let iy = 0; iy <= 7; iy++) {\r\n      if (colorAt(board, [ix, iy]) === color) {\r\n        moves.push(...getThreatsFrom(board, [], [ix, iy]))\r\n      }\r\n    }\r\n  }\r\n\r\n  return !!moves.find(x => refsAreEqual(x.to, ref))\r\n}\r\n\r\nfunction threatsByPieceTo (board, piece, ref) {\r\n  const moves = []\r\n  for (let ix = 0; ix <= 7; ix++) {\r\n    for (let iy = 0; iy <= 7; iy++) {\r\n      if (pieceAt(board, [ix, iy]) === piece) {\r\n        moves.push(...getThreatsFrom(board, [], [ix, iy]))\r\n      }\r\n    }\r\n  }\r\n\r\n  return moves.filter(x => refsAreEqual(x.to, ref))\r\n}\r\n\r\nfunction isInCheck (board, color) {\r\n  const king = findPiece(board, color === black ? 'k' : 'K')\r\n  // this is to support boards without a king, primarily for tests (perhaps fix the tests?)\r\n  if (king) {\r\n    const opponentColor = color === black ? white : black\r\n    return isThreatenedByColor(board, king, opponentColor)\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\nfunction canMoveOnTurn (board, log, moveRef) {\r\n  const move = parseMove(moveRef)\r\n  const color = colorAt(board, move.from)\r\n  const turn = log.length % 2 ? black : white\r\n  if (color !== turn) return false\r\n  return canMove(board, log, move)\r\n}\r\n\r\nfunction canMove (board, log, moveRef) {\r\n  const move = parseMove(moveRef)\r\n  const moves = getMovesFrom(board, log, move.from)\r\n  const allowedMoves = filterMovesIntoCheck(board, moves)\r\n  return !!allowedMoves.find(x => movesAreEqual(x, move))\r\n}\r\n\r\nfunction getPossibleMoves (board, log) {\r\n  const color = log.length % 2 ? black : white\r\n  return getPossibleMovesFor(board, color, log)\r\n}\r\n\r\nfunction getPossibleMovesFor (board, color, log) {\r\n  const moves = []\r\n  for (let ix = 0; ix <= 7; ix++) {\r\n    for (let iy = 0; iy <= 7; iy++) {\r\n      if (!emptyAt(board, [ix, iy]) && colorAt(board, [ix, iy]) === color) {\r\n        moves.push(...getMovesFrom(board, log, [ix, iy]))\r\n      }\r\n    }\r\n  }\r\n\r\n  const allowedMoves = filterMovesIntoCheck(board, moves)\r\n  return allowedMoves\r\n}\r\n\r\nfunction allPiecesSorted (board) {\r\n  return board.join('').replace(/\\W/g, '').split('').sort().join('')\r\n}\r\n\r\nfunction analyse (board) {\r\n  const blackInCheck = isInCheck(board, black)\r\n  const whiteInCheck = isInCheck(board, white)\r\n  if (blackInCheck && whiteInCheck) return 'Invalid - both in check'\r\n  if (blackInCheck) {\r\n    if (getPossibleMovesFor(board, black, []).length) {\r\n      return 'Black is in check'\r\n    } else {\r\n      return 'Black is checkmated'\r\n    }\r\n  }\r\n  if (whiteInCheck) {\r\n    if (getPossibleMovesFor(board, white, []).length) {\r\n      return 'White is in check'\r\n    } else {\r\n      return 'White is checkmated'\r\n    }\r\n  }\r\n\r\n  if (!getPossibleMovesFor(board, black, []).length) {\r\n    return 'Black cannot move'\r\n  }\r\n  if (!getPossibleMovesFor(board, white, []).length) {\r\n    return 'White cannot move'\r\n  }\r\n\r\n  if (allPiecesSorted(board) === 'Kk') {\r\n    return 'Stalemate - only kings'\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nfunction isPawnPromotion (board, moveRef) {\r\n  const move = parseMove(moveRef)\r\n  if (pieceAt(board, move.from) === 'P' && move.to.y === 7) {\r\n    return true\r\n  }\r\n  if (pieceAt(board, move.from) === 'p' && move.to.y === 0) {\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport {\r\n  canMoveOnTurn,\r\n  canMove,\r\n  isInCheck,\r\n  applyMove,\r\n  analyse,\r\n  getPossibleMoves,\r\n  toRef,\r\n  parseRef,\r\n  isPawnPromotion,\r\n  moveToString,\r\n  threatsByPieceTo\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/chess-validate.js","import {\r\n  canMoveOnTurn,\r\n  canMove,\r\n  isInCheck,\r\n  applyMove,\r\n  analyse,\r\n  getPossibleMoves,\r\n  toRef,\r\n  parseRef,\r\n  isPawnPromotion,\r\n  threatsByPieceTo\r\n} from './chess-validate'\r\n\r\nimport {\r\n  parseMove,\r\n  moveToString,\r\n  movesAreEqual,\r\n  pieceAt,\r\n  emptyAt\r\n} from './chess-core'\r\n\r\nfunction chooseMove (board, log) {\r\n  const moves = getPossibleMoves(board, log)\r\n  if (!moves.length) return null\r\n  const move = moves[~~(Math.random() * moves.length)]\r\n  return move\r\n}\r\n\r\nfunction logMove (board, moveRef) {\r\n  const move = parseMove(moveRef)\r\n  const piece = pieceAt(board, move.from)\r\n  const capture = emptyAt(board, move.to) ? '' : 'x'\r\n\r\n  if (piece === 'P' || piece === 'p') {\r\n    const promotionSuffix = move.promoteTo ? '=' + move.promoteTo : ''\r\n    if (move.from.x === move.to.x) {\r\n      return toRef(move.to) + promotionSuffix\r\n    } else {\r\n      const enPassantSuffix = capture === '' ? 'e.p.' : ''\r\n      return toRef(move.from)[0] + 'x' + toRef(move.to) + promotionSuffix + enPassantSuffix\r\n    }\r\n  }\r\n\r\n  if (piece === 'k') {\r\n    if (movesAreEqual(move, 'e8-g8')) return 'O-O'\r\n    if (movesAreEqual(move, 'e8-c8')) return 'O-O-O'\r\n  } else if (piece === 'K') {\r\n    if (movesAreEqual(move, 'e1-g1')) return 'O-O'\r\n    if (movesAreEqual(move, 'e1-c1')) return 'O-O-O'\r\n  }\r\n\r\n  const ambiguities = threatsByPieceTo(board, piece, move.to)\r\n  const rankAmbiguities = ambiguities.filter(x => x.from.y === move.from.y)\r\n  const fileAmbiguities = ambiguities.filter(x => x.from.x === move.from.x)\r\n\r\n  let disambiguate\r\n  if (fileAmbiguities.length > 1) {\r\n    if (rankAmbiguities.length > 1) {\r\n      disambiguate = toRef(move.from)\r\n    } else {\r\n      disambiguate = toRef(move.from)[1]\r\n    }\r\n  } else {\r\n    if (ambiguities.length > 1) {\r\n      disambiguate = toRef(move.from)[0]\r\n    } else {\r\n      disambiguate = ''\r\n    }\r\n  }\r\n\r\n  return piece.toUpperCase() + disambiguate + capture + toRef(move.to)\r\n}\r\n\r\nexport {\r\n  canMoveOnTurn,\r\n  canMove,\r\n  isInCheck,\r\n  applyMove,\r\n  logMove,\r\n  analyse,\r\n  getPossibleMoves,\r\n  toRef,\r\n  parseRef,\r\n  chooseMove,\r\n  isPawnPromotion,\r\n  parseMove,\r\n  moveToString\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/chess.js","<template>\n  <section>\n    <h1>Chess</h1>\n\n    <p>Chess using a vue chessboard component. There is validation that allows only moves according to rules. The computer only plays random moves. The game log does not show check or checkmate.</p>\n\n    <p>Writing this program was an exercise in <abbr title=\"Test Driven Development\">TDD</abbr> and Functional Programming using <a href=\"https://facebook.github.io/jest/\">Jest</a>.</p>\n\n    <h2>\n      <span v-if=\"!status\">{{ turn }} to play</span>\n      <span v-if=\"status\">{{ status }}</span>\n    </h2>\n\n    <chess-board\n      :highlight=\"highlight\"\n      :selected=\"selected\"\n      :board=\"boardRender\"\n      @clickSquare=\"clickSquare\"/>\n\n    <fieldset>\n      <label>\n        <input\n          v-model=\"aiPlaysBlack\"\n          type=\"checkbox\"\n          @change=\"actNow\">\n        Computer plays black\n      </label>\n\n      <label>\n        <input\n          v-model=\"aiPlaysWhite\"\n          type=\"checkbox\"\n          @change=\"actNow\">\n        Computer plays white\n      </label>\n\n      <label>\n        <input\n          v-model=\"autoRestart\"\n          type=\"checkbox\"\n          @change=\"actNow\">\n        Start new game automatically\n      </label>\n\n      <label>\n        <input\n          v-model=\"turnDelay\"\n          type=\"checkbox\"\n          @change=\"actNow\">\n        Turn delay\n      </label>\n    </fieldset>\n    <fieldset>\n      <label\n        or=\"move\">Move</label>\n      <input\n        id=\"move\"\n        v-model=\"move\"\n        type=\"text\"\n        placeholder=\"Move e.g. e2-e4\"\n        value=\"\">\n      <button\n        type=\"button\"\n        @click=\"go(move)\">Go</button>\n      <button\n        type=\"button\"\n        @click=\"reset()\">Reset</button>\n    </fieldset>\n    <pre>{{ boardString }}</pre>\n    <p>Move {{ moveCount }}</p>\n    <p>Game log: {{ gameLog }}</p>\n\n    <div\n      :class=\"{ show: showPromoteToDialog }\"\n      :aria-hidden=\"!showPromoteToDialog\"\n      class=\"modal\"\n      tabindex=\"-1\"\n      role=\"dialog\">\n      <div class=\"modal-overlay\"/>\n      <div\n        class=\"modal-dialog modal-dialog-centered\"\n        role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Promote to?</h5>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n              @click=\"promoteTo()\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body text-center\">\n            <button\n              @click=\"promoteTo('Q')\">&#9813;</button>\n            <button\n              @click=\"promoteTo('R')\">&#9814;</button>\n            <button\n              @click=\"promoteTo('B')\">&#9815;</button>\n            <button\n              @click=\"promoteTo('N')\">&#9816;</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </section>\n</template>\n\n<script>\nimport ChessBoard from '@/components/ChessBoard'\nimport * as chess from '@/assets/chess'\n\nexport default {\n  name: 'Chess',\n  components: { ChessBoard },\n  data () {\n    return {\n      move: '',\n      board: [],\n      selected: null,\n      log: [],\n      humanLog: [],\n      playRandom: false,\n      status: '',\n      aiPlaysBlack: false,\n      aiPlaysWhite: false,\n      autoRestart: false,\n      turnDelay: false,\n      gameOver: false,\n      showPromoteToDialog: false\n    }\n  },\n  computed: {\n    moveCount () {\n      return ~~(this.log.length / 2) + 1\n    },\n    boardRender () {\n      return this.board.map(x => x.replace(/\\./g, ' ').split(''))\n    },\n    boardString () {\n      return this.board.join('\\n')\n    },\n    gameLog () {\n      const result = []\n      let i = 0\n      while (this.humanLog.length > i) {\n        const white = this.humanLog[i]\n        const black = this.humanLog.length > i + 1 ? this.humanLog[i + 1] : ''\n        const turn = ~~(i / 2) + 1\n        result.push(`${turn}. ${white} ${black}\\n`)\n        i += 2\n      }\n      return result.join('')\n    },\n    turn () {\n      return this.log.length % 2 ? 'black' : 'white'\n    },\n    highlight () {\n      const result = []\n      if (this.log.length) {\n        const last = chess.parseMove(this.log[this.log.length - 1])\n        result.push(last.from)\n        result.push(last.to)\n      }\n      return result\n    }\n  },\n  mounted () {\n    this.reset()\n  },\n  methods: {\n    clickSquare (ref) {\n      if (this.selected === null) {\n        this.move = chess.toRef(ref) + '-'\n        this.selected = ref\n      } else {\n        this.move = this.move + chess.toRef(ref)\n        if (chess.isPawnPromotion(this.board, this.move)) {\n          this.showPromoteToDialog = true\n        } else {\n          this.go(this.move)\n        }\n      }\n    },\n    promoteTo (piece) {\n      this.showPromoteToDialog = false\n      if (piece) {\n        this.move = this.move + '=' + piece\n        this.go(this.move)\n      } else {\n        this.move = ''\n        this.selected = null\n      }\n    },\n    go (moveRef) {\n      const move = chess.parseMove(moveRef)\n      if (chess.canMoveOnTurn(this.board, this.log, move)) {\n        this.humanLog.push(\n          chess.logMove(this.board, move) ||\n            chess.moveToString(move).toUpperCase()\n        )\n        this.board = chess.applyMove(this.board, move)\n        this.log.push(move)\n        this.status = chess.analyse(this.board)\n        if (/^Stalemate/.test(this.status)) {\n          this.gameOver = true\n        }\n      }\n      this.move = ''\n      this.selected = null\n      clearTimeout(this.timeout)\n      this.timeout = setTimeout(() => {\n        this.act()\n      }, this.turnDelay ? 1000 : 0)\n    },\n    reset () {\n      this.board = [\n        'rnbqkbnr',\n        'pppppppp',\n        '........',\n        '........',\n        '........',\n        '........',\n        'PPPPPPPP',\n        'RNBQKBNR'\n      ]\n      this.log = []\n      this.humanLog = []\n      this.status = null\n      this.gameOver = false\n      this.act()\n    },\n    act () {\n      if (!this.gameOver) {\n        if (\n          (this.turn === 'white' && this.aiPlaysWhite) ||\n          (this.turn === 'black' && this.aiPlaysBlack)\n        ) {\n          const move = chess.chooseMove(this.board, this.log)\n          if (move === null) {\n            this.gameOver = true\n          } else {\n            this.go(move)\n          }\n        }\n      }\n\n      if (this.gameOver && this.autoRestart) {\n        const delay = /^Stalemate/.test(this.status) ? 1000 : 10000\n        clearTimeout(this.timeout)\n        this.timeout = setTimeout(() => {\n          if (!this.autoRestart) return\n          this.reset()\n        }, delay)\n      }\n    },\n    actNow () {\n      clearTimeout(this.timeout)\n      this.act()\n    }\n  }\n}\n</script>\n\n <style lang=\"scss\" scoped>\n.btn-promote-to {\n  font-size: 2em;\n  margin: 20px;\n}\n\n@-webkit-keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-moz-keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n.modal {\n  //TODO this needs a bit of work\n  display: none;\n  position: fixed;\n  top: 0;\n  opacity: 0;\n  .modal-dialog {\n    background-color: white;\n    position: relative;\n  }\n  .modal-overlay {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  &.show {\n    display: block;\n    -webkit-animation: fade-in 0.4s;\n    -moz-animation: fade-in 0.4s;\n    -o-animation: fade-in 0.4s;\n    animation: fade-in 0.4s;\n    opacity: 1;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Chess.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('h1',[_vm._v(\"Chess\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Chess using a vue chessboard component. There is validation that allows only moves according to rules. The computer only plays random moves. The game log does not show check or checkmate.\")]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('h2',[(!_vm.status)?_c('span',[_vm._v(_vm._s(_vm.turn)+\" to play\")]):_vm._e(),_vm._v(\" \"),(_vm.status)?_c('span',[_vm._v(_vm._s(_vm.status))]):_vm._e()]),_vm._v(\" \"),_c('chess-board',{attrs:{\"highlight\":_vm.highlight,\"selected\":_vm.selected,\"board\":_vm.boardRender},on:{\"clickSquare\":_vm.clickSquare}}),_vm._v(\" \"),_c('fieldset',[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.aiPlaysBlack),expression:\"aiPlaysBlack\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.aiPlaysBlack)?_vm._i(_vm.aiPlaysBlack,null)>-1:(_vm.aiPlaysBlack)},on:{\"change\":[function($event){var $$a=_vm.aiPlaysBlack,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.aiPlaysBlack=$$a.concat([$$v]))}else{$$i>-1&&(_vm.aiPlaysBlack=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.aiPlaysBlack=$$c}},_vm.actNow]}}),_vm._v(\"\\n      Computer plays black\\n    \")]),_vm._v(\" \"),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.aiPlaysWhite),expression:\"aiPlaysWhite\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.aiPlaysWhite)?_vm._i(_vm.aiPlaysWhite,null)>-1:(_vm.aiPlaysWhite)},on:{\"change\":[function($event){var $$a=_vm.aiPlaysWhite,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.aiPlaysWhite=$$a.concat([$$v]))}else{$$i>-1&&(_vm.aiPlaysWhite=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.aiPlaysWhite=$$c}},_vm.actNow]}}),_vm._v(\"\\n      Computer plays white\\n    \")]),_vm._v(\" \"),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.autoRestart),expression:\"autoRestart\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.autoRestart)?_vm._i(_vm.autoRestart,null)>-1:(_vm.autoRestart)},on:{\"change\":[function($event){var $$a=_vm.autoRestart,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.autoRestart=$$a.concat([$$v]))}else{$$i>-1&&(_vm.autoRestart=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.autoRestart=$$c}},_vm.actNow]}}),_vm._v(\"\\n      Start new game automatically\\n    \")]),_vm._v(\" \"),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.turnDelay),expression:\"turnDelay\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.turnDelay)?_vm._i(_vm.turnDelay,null)>-1:(_vm.turnDelay)},on:{\"change\":[function($event){var $$a=_vm.turnDelay,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.turnDelay=$$a.concat([$$v]))}else{$$i>-1&&(_vm.turnDelay=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.turnDelay=$$c}},_vm.actNow]}}),_vm._v(\"\\n      Turn delay\\n    \")])]),_vm._v(\" \"),_c('fieldset',[_c('label',{attrs:{\"or\":\"move\"}},[_vm._v(\"Move\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.move),expression:\"move\"}],attrs:{\"id\":\"move\",\"type\":\"text\",\"placeholder\":\"Move e.g. e2-e4\",\"value\":\"\"},domProps:{\"value\":(_vm.move)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.move=$event.target.value}}}),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.go(_vm.move)}}},[_vm._v(\"Go\")]),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.reset()}}},[_vm._v(\"Reset\")])]),_vm._v(\" \"),_c('pre',[_vm._v(_vm._s(_vm.boardString))]),_vm._v(\" \"),_c('p',[_vm._v(\"Move \"+_vm._s(_vm.moveCount))]),_vm._v(\" \"),_c('p',[_vm._v(\"Game log: \"+_vm._s(_vm.gameLog))]),_vm._v(\" \"),_c('div',{staticClass:\"modal\",class:{ show: _vm.showPromoteToDialog },attrs:{\"aria-hidden\":!_vm.showPromoteToDialog,\"tabindex\":\"-1\",\"role\":\"dialog\"}},[_c('div',{staticClass:\"modal-overlay\"}),_vm._v(\" \"),_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\"},[_vm._v(\"Promote to?\")]),_vm._v(\" \"),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"},on:{\"click\":function($event){_vm.promoteTo()}}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"modal-body text-center\"},[_c('button',{on:{\"click\":function($event){_vm.promoteTo('Q')}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.promoteTo('R')}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.promoteTo('B')}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.promoteTo('N')}}},[_vm._v(\"\")])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Writing this program was an exercise in \"),_c('abbr',{attrs:{\"title\":\"Test Driven Development\"}},[_vm._v(\"TDD\")]),_vm._v(\" and Functional Programming using \"),_c('a',{attrs:{\"href\":\"https://facebook.github.io/jest/\"}},[_vm._v(\"Jest\")]),_vm._v(\".\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3bef491d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Chess.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3bef491d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"includePaths\\\":[\\\"./src/styles\\\",\\\"./node_modules/bootstrap/scss\\\",\\\"./node_modules/bootstrap/dist/css\\\"],\\\"data\\\":\\\"@import \\\\\\\"_main.scss\\\\\\\";\\\",\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chess.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chess.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chess.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3bef491d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chess.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3bef491d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Chess.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <table>\n      <tr\n        v-for=\"(row, y) in board\"\n        :key=\"y\">\n        <td\n          v-for=\"(square, x) in row\"\n          :key=\"x\"\n          :class=\"getHighlight({x, y:7 - y})\"\n          @click=\"clickSquare({x, y:7 - y})\">\n          <span\n            v-if=\"square === 'K'\"\n            class=\"piece\">&#9812;</span>\n          <span\n            v-else-if=\"square === 'Q'\"\n            class=\"piece\">&#9813;</span>\n          <span\n            v-else-if=\"square === 'R'\"\n            class=\"piece\">&#9814;</span>\n          <span\n            v-else-if=\"square === 'B'\"\n            class=\"piece\">&#9815;</span>\n          <span\n            v-else-if=\"square === 'N'\"\n            class=\"piece\">&#9816;</span>\n          <span\n            v-else-if=\"square === 'P'\"\n            class=\"piece\">&#9817;</span>\n          <span\n            v-else-if=\"square === 'k'\"\n            class=\"piece\">&#9818;</span>\n          <span\n            v-else-if=\"square === 'q'\"\n            class=\"piece\">&#9819;</span>\n          <span\n            v-else-if=\"square === 'r'\"\n            class=\"piece\">&#9820;</span>\n          <span\n            v-else-if=\"square === 'b'\"\n            class=\"piece\">&#9821;</span>\n          <span\n            v-else-if=\"square === 'n'\"\n            class=\"piece\">&#9822;</span>\n          <span\n            v-else-if=\"square === 'p'\"\n            class=\"piece\">&#9823;</span>\n          <span v-else-if=\"square === '/' || square === ' '\"/>\n          <span\n            v-else\n            class=\"piece\" >{{ square }}</span>\n        </td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nexport default {\n  props: [\"board\", \"highlight\", \"selected\"],\n  data() {\n    return {};\n  },\n  methods: {\n    clickSquare(ref){\n      this.$emit('clickSquare', ref);\n    },\n    getHighlight(ref) {\n      const result = {}\n      if (this.highlight) {\n        this.highlight.forEach(coord => {\n          if (coord.x === ref.x && coord.y === ref.y) {\n            result.highlight = true;\n          }\n        })\n      }\n      if (this.selected && this.selected.x === ref.x && this.selected.y === ref.y) {\n        result.selected = true;\n      }\n      return result\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n\ntable {\n  tr {\n    &:nth-child(even) td:nth-child(odd),\n    &:nth-child(odd) td:nth-child(even) {\n      background-color: #ddd;\n      &.highlight {\n        background-color: #fc0;\n      }\n      &.selected {\n        background-color: #bbf;\n      }\n    }\n    td {\n      &.highlight {\n        background-color: #fc0;\n      }\n      &.selected {\n        background-color: #bbf;\n      }\n      cursor: pointer;\n      border: 2px solid #000;\n      background-color: #fff;\n      padding: .5em;\n      width: 3em;\n      height: 3em;\n      .piece {\n        font-size: 2em;\n        position: absolute;\n        line-height: 1em;\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ChessBoard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('table',_vm._l((_vm.board),function(row,y){return _c('tr',{key:y},_vm._l((row),function(square,x){return _c('td',{key:x,class:_vm.getHighlight({x: x, y:7 - y}),on:{\"click\":function($event){_vm.clickSquare({x: x, y:7 - y})}}},[(square === 'K')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'Q')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'R')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'B')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'N')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'P')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'k')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'q')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'r')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'b')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'n')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === 'p')?_c('span',{staticClass:\"piece\"},[_vm._v(\"\")]):(square === '/' || square === ' ')?_c('span'):_c('span',{staticClass:\"piece\"},[_vm._v(_vm._s(square))])])}))}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0135aede\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ChessBoard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0135aede\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"includePaths\\\":[\\\"./src/styles\\\",\\\"./node_modules/bootstrap/scss\\\",\\\"./node_modules/bootstrap/dist/css\\\"],\\\"data\\\":\\\"@import \\\\\\\"_main.scss\\\\\\\";\\\",\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChessBoard.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChessBoard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChessBoard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0135aede\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChessBoard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0135aede\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ChessBoard.vue\n// module id = null\n// module chunks = ","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array-iter.js\n// module id = Mhyx\n// module chunks = 4","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/is-iterable.js\n// module id = Xd32\n// module chunks = 4","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/array/from.js\n// module id = c/Tr\n// module chunks = 4","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/slicedToArray.js\n// module id = d7EF\n// module chunks = 4","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-detect.js\n// module id = dY0y\n// module chunks = 4","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_create-property.js\n// module id = fBQ2\n// module chunks = 4","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-call.js\n// module id = msXi\n// module chunks = 4","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.from.js\n// module id = qyJz\n// module chunks = 4","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/is-iterable.js\n// module id = us/S\n// module chunks = 4"],"sourceRoot":""}