webpackJsonp([6],{"7xuQ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("woOf"),s=i.n(n),r=i("eiJk"),a=i("BFnm"),o=i("Zx67"),l=i.n(o),u=i("Zrlr"),c=i.n(u),h=i("wxAW"),m=i.n(h),v=i("zwoO"),d=i.n(v),f=i("Pf15"),p=i.n(f),g=i("kwsk"),y=function(){function e(t,i,n){c()(this,e),this.width=t,this.height=i,this.current=null,this.component=n}return m()(e,[{key:"destroy",value:function(){this.constantly&&(this.constantly.destroy(),this.constantly=null)}},{key:"next",value:function(){return this.current?this.current.x==this.width?(this.current.x=0,this.current.y++):this.current.y==this.height?this.current=null:this.current.x++:this.current={x:0,y:0},this.current}},{key:"each",value:function(e){var t=this;this.constantly=Object(g.a)(function(){var i=t.next();i?e(i):t.destroy()})}}]),e}(),_=function(e){function t(e,i,n,s,r,a,o){c()(this,t);var u=d()(this,(t.__proto__||l()(t)).call(this,e,i,o));return u.realMin=n,u.imagMin=s,u.realMax=r,u.imagMax=a,u}return p()(t,e),m()(t,[{key:"each",value:function(e){var t=this;return y.prototype.each.call(this,function(i){e(t.toComplex(i.x,i.y))})}},{key:"toComplex",value:function(e,t){return{x:e,y:t,r:e/this.width*(this.realMax-1*this.realMin)+1*this.realMin,i:t/this.height*(this.imagMax-this.imagMin)+this.imagMin}}}]),t}(y),b=i("gTRW"),x=i("tvjo"),M=i.n(x);function w(e){var t=function(e){for(var t=0,i=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{x:t,y:i}}(e),i=t.x,n=t.y;return{x:i-(void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft),y:n-(void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)}}var C=i("pKkI"),E={name:"Mandelbrot",data:function(){return{redrawRate:20,realMin:-2.5,realMax:1.5,imagMin:-2,imagMax:2,hiRes:!1,maxIterations:50,julia:!1,juliaR:-1,juliaI:0,snapshots:[]}},mounted:function(){this.update()},beforeDestroy:function(){this.destroyChildObjects()},computed:{isHiResAvailable:function(){return 1!==Object(C.a)()}},methods:{snapshot:function(){this.snapshots.push(this.canvasWriter.toCanvas().toDataURL())},reset:function(){this.realMin=-2.5,this.realMax=1.5,this.imagMin=-2,this.imagMax=2,this.julia=!1,this.juliaR=-1,this.juliaI=0,this.hiRes=!1,this.maxIterations=50,this.update()},pinch:function(e){var t=w(e.target),i=this.canvasWriter.getCanvasPoint(e.center.x-t.x,e.center.y-t.y),n=this.grid.toComplex(i.x,i.y),s="pinchin"===e.additionalEvent?.5:2;this.zoom(n,s)},clickZoom:function(e){var t=this.canvasWriter.getCanvasPoint(e.offsetX,e.offsetY),i=this.grid.toComplex(t.x,t.y),n=e.shiftKey?.5:2;this.zoom(i,n)},openFullscreen:function(e){var t=this;this.fullscreen&&this.fullscreen.dispose();var i=document.getElementsByClassName("mandelbrot-canvas")[0];this.fullscreen=M()(i),this.fullscreen.on("attain",function(){var e=document.getElementsByClassName("mandelbrot-canvas")[0];e.style.width=screen.width+"px",e.style.height=screen.height+"px",t.update()}),this.fullscreen.on("release",function(){var e=document.getElementsByClassName("mandelbrot-canvas")[0];e.style.width="",e.style.height="",t.update(),t.fullscreen.dispose(),t.fullscreen=null}),this.fullscreen.on("error",function(){console.error("fullscreen not supported")}),this.fullscreen.request()},zoom:function(e,t){var i=this.grid.realMax-this.grid.realMin,n=this.grid.imagMax-this.grid.imagMin;this.realMin=e.r-i/2/t,this.realMax=e.r+i/2/t,this.imagMin=e.i-n/2/t,this.imagMax=e.i+n/2/t,this.update()},destroyChildObjects:function(){this.canvasWriter&&this.canvasWriter.destroy(),this.grid&&this.grid.destroy(),this.fullscreen&&this.fullscreen.dispose()},update:function(){var e=this;this.grid&&this.grid.destroy();var t=document.getElementsByClassName("mandelbrot-canvas")[0];"undefined"==typeof jest&&(this.canvasWriter?(this.canvasWriter.hiRes=this.hiRes,this.canvasWriter.refresh()):(this.canvasWriter=new r.a(t,void 0,this.hiRes),this.canvasWriter=s()(this.canvasWriter,a.a)),this.height=this.canvasWriter.height,this.width=this.canvasWriter.width,this.grid=new _(this.width,this.height,this.realMin,this.imagMin,this.realMax,this.imagMax,this),this.grid.each(function(t){var i=e.calculate(t);e.setPointColor(t,i)}))},calculate:function(e){for(var t=void 0,i=0,n={r:e.r,i:e.i};i<this.maxIterations;i++){var s=this.julia?this.juliaR:e.r,r=this.julia?this.juliaI:e.i;if((t=(n={r:n.r*n.r-n.i*n.i+s,i:n.r*n.i*2+r}).r*n.r+n.i*n.i)>4)break}return{iterations:i,value:t,z:n,c:e}},setPointColor:function(e,t){var i=~~(6*t.value),n=t.value<9?0:~~(20*t.value),s=255-t.iterations/this.maxIterations*255,r=b.a.fromRGB(i,n,s);this.canvasWriter.setPoint(e.x,e.y,r)}}},j={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[e._m(0),e._v(" "),i("p",[e._v("A html canvas showing a Mandelbrot set, and some options to show a Julia set.")]),e._v(" "),i("p",[e._v("Click/shift to zoom in and out, or pinch-in/out on touchscreen.")]),e._v(" "),i("v-touch",{staticClass:"touch-area",on:{pinchend:e.pinch}},[i("figure",[i("canvas",{staticClass:"mandelbrot-canvas",attrs:{width:"100",height:"100"},on:{click:e.clickZoom}})])]),e._v(" "),i("div",{staticClass:"container"},[i("div",[i("button",{staticClass:"btn",on:{click:e.snapshot}},[e._v("Snapshot")]),e._v(" "),i("button",{staticClass:"btn",on:{click:e.reset}},[e._v("Reset")]),e._v(" "),i("button",{staticClass:"btn btn-primary",on:{click:e.update}},[e._v("Update")]),e._v(" "),i("button",{staticClass:"btn",on:{click:e.openFullscreen}},[e._v("Fullscreen")]),e._v(" "),e.isHiResAvailable?i("label",{attrs:{for:"hiRes"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.hiRes,expression:"hiRes"}],attrs:{id:"hiRes",type:"checkbox"},domProps:{checked:Array.isArray(e.hiRes)?e._i(e.hiRes,null)>-1:e.hiRes},on:{click:e.update,change:function(t){var i=e.hiRes,n=t.target,s=!!n.checked;if(Array.isArray(i)){var r=e._i(i,null);n.checked?r<0&&(e.hiRes=i.concat([null])):r>-1&&(e.hiRes=i.slice(0,r).concat(i.slice(r+1)))}else e.hiRes=s}}}),e._v("\n        hi-res\n      ")]):e._e()]),e._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column form-group col-2 col-md-6 my-1"},[i("label",{staticClass:"form-label",attrs:{for:"realMin"}},[e._v("R min")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.realMin,expression:"realMin",modifiers:{number:!0}}],staticClass:"form-input",attrs:{id:"realMin",type:"number",step:"any"},domProps:{value:e.realMin},on:{input:function(t){t.target.composing||(e.realMin=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"column form-group col-2 col-md-6 my-1"},[i("label",{staticClass:"form-label",attrs:{for:"realMax"}},[e._v("R max")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.realMax,expression:"realMax",modifiers:{number:!0}}],staticClass:"form-input",attrs:{id:"realMax",type:"number",step:"any"},domProps:{value:e.realMax},on:{input:function(t){t.target.composing||(e.realMax=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"column form-group col-2 col-md-6 my-1"},[i("label",{staticClass:"form-label",attrs:{for:"imagMin"}},[e._v("i min")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.imagMin,expression:"imagMin",modifiers:{number:!0}}],staticClass:"form-input",attrs:{id:"imagMin",type:"number",step:"any"},domProps:{value:e.imagMin},on:{input:function(t){t.target.composing||(e.imagMin=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"column form-group col-2 col-md-6 my-1"},[i("label",{staticClass:"form-label",attrs:{for:"imagMax"}},[e._v("i max")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.imagMax,expression:"imagMax",modifiers:{number:!0}}],staticClass:"form-input",attrs:{id:"imagMax",type:"number",step:"any"},domProps:{value:e.imagMax},on:{input:function(t){t.target.composing||(e.imagMax=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"column form-group col-2 col-md-6 my-1"},[i("label",{staticClass:"form-label",attrs:{for:"maxIterations"}},[e._v("max depth")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.maxIterations,expression:"maxIterations"}],staticClass:"form-input",attrs:{id:"maxIterations",type:"number"},domProps:{value:e.maxIterations},on:{input:function(t){t.target.composing||(e.maxIterations=t.target.value)}}})])]),e._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column form-group col-2 col-md-12 my-1"},[i("label",{staticClass:"form-switch",attrs:{for:"julia"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.julia,expression:"julia"}],attrs:{id:"julia",type:"checkbox"},domProps:{checked:Array.isArray(e.julia)?e._i(e.julia,null)>-1:e.julia},on:{click:e.update,change:function(t){var i=e.julia,n=t.target,s=!!n.checked;if(Array.isArray(i)){var r=e._i(i,null);n.checked?r<0&&(e.julia=i.concat([null])):r>-1&&(e.julia=i.slice(0,r).concat(i.slice(r+1)))}else e.julia=s}}}),e._v(" "),i("i",{staticClass:"form-icon"}),e._v(" Julia\n        ")])]),e._v(" "),i("div",{staticClass:"column form-group col-2 col-md-6 my-1"},[i("label",{staticClass:"form-label",attrs:{for:"juliaR"}},[e._v("Real")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.juliaR,expression:"juliaR",modifiers:{number:!0}}],staticClass:"form-input",attrs:{id:"juliaR",type:"number",step:"any"},domProps:{value:e.juliaR},on:{input:function(t){t.target.composing||(e.juliaR=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"column form-group col-2 col-md-6 my-1"},[i("label",{staticClass:"form-label",attrs:{for:"juliaI"}},[e._v("Imaginary")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.juliaI,expression:"juliaI",modifiers:{number:!0}}],staticClass:"form-input",attrs:{id:"juliaI",type:"number",step:"any"},domProps:{value:e.juliaI},on:{input:function(t){t.target.composing||(e.juliaI=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})])])]),e._v(" "),i("div",{staticClass:"snapshots"},e._l(e.snapshots,function(e){return i("div",{key:e,staticClass:"snapshot"},[i("img",{key:e,attrs:{src:e}})])}))],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",[this._v("Mandelbrot "),t("small",[this._v("(and Julia)")])])}]};var k=i("VU/8")(E,j,!1,function(e){i("WqjV")},"data-v-f92e8196",null);t.default=k.exports},"G/vx":function(e,t){n.removeEventListener=function(e,t,n,l){return(i=i||(document.addEventListener?{add:s,rm:r}:{add:a,rm:o})).rm(e,t,n,l)},n.addEventListener=n,e.exports=n;var i=null;function n(e,t,n,l){return(i=i||(document.addEventListener?{add:s,rm:r}:{add:a,rm:o})).add(e,t,n,l)}function s(e,t,i,n){e.addEventListener(t,i,n)}function r(e,t,i,n){e.removeEventListener(t,i,n)}function a(e,t,i,n){if(n)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+t,i)}function o(e,t,i,n){e.detachEvent("on"+t,i)}},WqjV:function(e,t){},tvjo:function(e,t,i){e.exports=a,a.available=function(){return!!o(document.body)},a.enabled=function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)};var n=i("vzCy").EventEmitter,s=i("G/vx"),r=s.removeEventListener;function a(e){for(var t=e.ownerDocument,i=(t.body,o(e)),a=new n,l=["","webkit","moz"],u=0,c=l.length;u<c;++u)s(t,l[u]+"fullscreenchange",h),s(t,l[u]+"fullscreenerror",m);return s(t,"MSFullscreenChange",h),s(t,"MSFullscreenError",m),a.release=function(){var i=e.exitFullscreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.mozExitFullScreen||e.msExitFullscreen;if(i)return void i.apply(e,arguments);(t.exitFullscreen||t.webkitExitFullscreen||t.mozCancelFullScreen||t.mozExitFullScreen||t.msExitFullscreen).apply(t,arguments)},a.request=function(){return i.apply(e,arguments)},a.dispose=function(){for(var e=0,i=l.length;e<i;++e)r(t,l[e]+"fullscreenchange",h),r(t,l[e]+"fullscreenerror",m);r(t,"MSFullscreenChange",h),r(t,"MSFullscreenError",m)},a.target=v,o||setTimeout(function(){a.emit("error",new Error("fullscreen is not supported"))},0),a;function h(){if(!v())return a.emit("release");a.emit("attain")}function m(){a.emit("error")}function v(){return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||null}}function o(e){return e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen}},vzCy:function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,a,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r(i=this._events[e]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(s(i))for(o=Array.prototype.slice.call(arguments,1),a=(u=i.slice()).length,l=0;l<a;l++)u[l].apply(this,o);return!0},i.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(a=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var i=!1;function s(){this.removeListener(e,s),i||(i=!0,t.apply(this,arguments))}return s.listener=t,this.on(e,s),this},i.prototype.removeListener=function(e,t){var i,r,a,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(i=this._events[e]).length,r=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(i)){for(o=a;o-- >0;)if(i[o]===t||i[o].listener&&i[o].listener===t){r=o;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}}});
//# sourceMappingURL=6.2fe80d2a169691fa6976.js.map