webpackJsonp([6],{"3evT":function(e,t){},"7xuQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("woOf"),r=n.n(i),s=n("eiJk"),a=n("BFnm"),o=n("Zx67"),l=n.n(o),u=n("Zrlr"),c=n.n(u),h=n("wxAW"),v=n.n(h),m=n("zwoO"),d=n.n(m),f=n("Pf15"),p=n.n(f),_=n("kwsk"),g=function(){function e(t,n,i){c()(this,e),this.width=t,this.height=n,this.current=null,this.component=i}return v()(e,[{key:"destroy",value:function(){this.constantly&&(this.constantly.destroy(),this.constantly=null)}},{key:"next",value:function(){return this.current?this.current.x==this.width?(this.current.x=0,this.current.y++):this.current.y==this.height?this.current=null:this.current.x++:this.current={x:0,y:0},this.current}},{key:"each",value:function(e){var t=this;this.constantly=Object(_.a)(function(){var n=t.next();n?e(n):t.destroy()})}}]),e}(),y=function(e){function t(e,n,i,r,s,a,o){c()(this,t);var u=d()(this,(t.__proto__||l()(t)).call(this,e,n,o));return u.realMin=i,u.imagMin=r,u.realMax=s,u.imagMax=a,u}return p()(t,e),v()(t,[{key:"each",value:function(e){var t=this;return g.prototype.each.call(this,function(n){e(t.toComplex(n.x,n.y))})}},{key:"toComplex",value:function(e,t){return{x:e,y:t,r:e/this.width*(this.realMax-1*this.realMin)+1*this.realMin,i:t/this.height*(this.imagMax-this.imagMin)+this.imagMin}}}]),t}(g),x=n("gTRW"),b=n("tvjo"),M=n.n(b);function w(e){var t=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{x:t,y:n}}(e),n=t.x,i=t.y;return{x:n-(void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft),y:i-(void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)}}var E=n("pKkI"),j={name:"Mandelbrot",data:function(){return{redrawRate:20,realMin:-2.5,realMax:1.5,imagMin:-2,imagMax:2,hiRes:!1,maxIterations:50,julia:!1,juliaR:-1,juliaI:0,snapshots:[]}},mounted:function(){this.update()},beforeDestroy:function(){this.destroyChildObjects()},computed:{isHiResAvailable:function(){return 1!==Object(E.a)()}},methods:{snapshot:function(){this.snapshots.push(this.canvasWriter.toCanvas().toDataURL())},reset:function(){this.realMin=-2.5,this.realMax=1.5,this.imagMin=-2,this.imagMax=2,this.julia=!1,this.juliaR=-1,this.juliaI=0,this.hiRes=!1,this.maxIterations=50,this.update()},pinch:function(e){var t=w(e.target),n=this.canvasWriter.getCanvasPoint(e.center.x-t.x,e.center.y-t.y),i=this.grid.toComplex(n.x,n.y),r="pinchin"===e.additionalEvent?.5:2;this.zoom(i,r)},clickZoom:function(e){var t=this.canvasWriter.getCanvasPoint(e.offsetX,e.offsetY),n=this.grid.toComplex(t.x,t.y),i=e.shiftKey?.5:2;this.zoom(n,i)},openFullscreen:function(e){var t=this;this.fullscreen&&this.fullscreen.dispose();var n=document.getElementById("mandelbrot-canvas");this.fullscreen=M()(n),this.fullscreen.on("attain",function(){var e=document.getElementById("mandelbrot-canvas");e.style.width=screen.width+"px",e.style.height=screen.height+"px",t.update()}),this.fullscreen.on("release",function(){var e=document.getElementById("mandelbrot-canvas");e.style.width="",e.style.height="",t.update(),t.fullscreen.dispose(),t.fullscreen=null}),this.fullscreen.on("error",function(){console.error("fullscreen not supported")}),this.fullscreen.request()},zoom:function(e,t){var n=this.grid.realMax-this.grid.realMin,i=this.grid.imagMax-this.grid.imagMin;this.realMin=e.r-n/2/t,this.realMax=e.r+n/2/t,this.imagMin=e.i-i/2/t,this.imagMax=e.i+i/2/t,this.update()},destroyChildObjects:function(){this.canvasWriter&&this.canvasWriter.destroy(),this.grid&&this.grid.destroy(),this.fullscreen&&this.fullscreen.dispose()},update:function(){var e=this;this.grid&&this.grid.destroy();var t=document.getElementById("mandelbrot-canvas");"undefined"==typeof jest&&(this.canvasWriter?(this.canvasWriter.hiRes=this.hiRes,this.canvasWriter.refresh()):(this.canvasWriter=new s.a(t,void 0,this.hiRes),this.canvasWriter=r()(this.canvasWriter,a.a)),this.height=this.canvasWriter.height,this.width=this.canvasWriter.width,this.grid=new y(this.width,this.height,this.realMin,this.imagMin,this.realMax,this.imagMax,this),this.grid.each(function(t){var n=e.calculate(t);e.setPointColor(t,n)}))},calculate:function(e){for(var t=void 0,n=0,i={r:e.r,i:e.i};n<this.maxIterations;n++){var r=this.julia?this.juliaR:e.r,s=this.julia?this.juliaI:e.i;if((t=(i={r:i.r*i.r-i.i*i.i+r,i:i.r*i.i*2+s}).r*i.r+i.i*i.i)>4)break}return{iterations:n,value:t,z:i,c:e}},setPointColor:function(e,t){var n=~~(6*t.value),i=t.value<9?0:~~(20*t.value),r=255-t.iterations/this.maxIterations*255,s=x.a.fromRGB(n,i,r);this.canvasWriter.setPoint(e.x,e.y,s)}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[e._m(0),e._v(" "),n("p",[e._v("A html canvas showing a Mandelbrot set, and some options to show a Julia set.")]),e._v(" "),n("p",[e._v("Click/shift to zoom in and out, or pinch-in/out on touchscreen.")]),e._v(" "),n("v-touch",{staticClass:"touch-area",on:{pinchend:e.pinch}},[n("figure",[n("canvas",{attrs:{id:"mandelbrot-canvas",width:"100",height:"100"},on:{click:e.clickZoom}})])]),e._v(" "),n("fieldset",[n("button",{attrs:{type:"button"},on:{click:e.snapshot}},[e._v("Snapshot")]),e._v(" "),n("button",{attrs:{type:"button"},on:{click:e.reset}},[e._v("Reset")]),e._v(" "),n("button",{attrs:{type:"button"},on:{click:e.update}},[e._v("Update")]),e._v(" "),n("button",{attrs:{type:"button"},on:{click:e.openFullscreen}},[e._v("Fullscreen")]),e._v(" "),e.isHiResAvailable?n("label",{attrs:{for:"hiRes"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.hiRes,expression:"hiRes"}],attrs:{id:"hiRes",type:"checkbox"},domProps:{checked:Array.isArray(e.hiRes)?e._i(e.hiRes,null)>-1:e.hiRes},on:{click:e.update,change:function(t){var n=e.hiRes,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&(e.hiRes=n.concat([null])):s>-1&&(e.hiRes=n.slice(0,s).concat(n.slice(s+1)))}else e.hiRes=r}}}),e._v("\n      hi-res\n    ")]):e._e()]),e._v(" "),n("fieldset",[n("label",{attrs:{for:"realMin"}},[e._v("R min")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.realMin,expression:"realMin",modifiers:{number:!0}}],attrs:{id:"realMin",type:"number",step:"any"},domProps:{value:e.realMin},on:{input:function(t){t.target.composing||(e.realMin=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("label",{attrs:{for:"realMax"}},[e._v("R max")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.realMax,expression:"realMax",modifiers:{number:!0}}],attrs:{id:"realMax",type:"number",step:"any"},domProps:{value:e.realMax},on:{input:function(t){t.target.composing||(e.realMax=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("label",{attrs:{for:"imagMin"}},[e._v("i min")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.imagMin,expression:"imagMin",modifiers:{number:!0}}],attrs:{id:"imagMin",type:"number",step:"any"},domProps:{value:e.imagMin},on:{input:function(t){t.target.composing||(e.imagMin=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("label",{attrs:{for:"imagMax"}},[e._v("i max")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.imagMax,expression:"imagMax",modifiers:{number:!0}}],attrs:{id:"imagMax",type:"number",step:"any"},domProps:{value:e.imagMax},on:{input:function(t){t.target.composing||(e.imagMax=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("label",{attrs:{for:"maxIterations"}},[e._v("max depth")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.maxIterations,expression:"maxIterations"}],attrs:{id:"maxIterations",type:"number"},domProps:{value:e.maxIterations},on:{input:function(t){t.target.composing||(e.maxIterations=t.target.value)}}})]),e._v(" "),n("fieldset",[n("label",{attrs:{for:"julia"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.julia,expression:"julia"}],attrs:{id:"julia",type:"checkbox"},domProps:{checked:Array.isArray(e.julia)?e._i(e.julia,null)>-1:e.julia},on:{click:e.update,change:function(t){var n=e.julia,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=e._i(n,null);i.checked?s<0&&(e.julia=n.concat([null])):s>-1&&(e.julia=n.slice(0,s).concat(n.slice(s+1)))}else e.julia=r}}}),e._v("\n      Julia\n    ")]),e._v(" "),n("label",{attrs:{for:"juliaR"}},[e._v("Real")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.juliaR,expression:"juliaR",modifiers:{number:!0}}],attrs:{id:"juliaR",type:"number",step:"any"},domProps:{value:e.juliaR},on:{input:function(t){t.target.composing||(e.juliaR=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("label",{attrs:{for:"juliaI"}},[e._v("Imaginary")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.juliaI,expression:"juliaI",modifiers:{number:!0}}],attrs:{id:"juliaI",type:"number",step:"any"},domProps:{value:e.juliaI},on:{input:function(t){t.target.composing||(e.juliaI=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("div",{staticClass:"snapshots"},e._l(e.snapshots,function(e){return n("div",{key:e,staticClass:"snapshot"},[n("img",{key:e,attrs:{src:e}})])}))],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",[this._v("Mandelbrot "),t("small",[this._v("(and Julia)")])])}]};var L=n("VU/8")(j,k,!1,function(e){n("3evT")},"data-v-5af05d8e",null);t.default=L.exports},"G/vx":function(e,t){i.removeEventListener=function(e,t,i,l){return(n=n||(document.addEventListener?{add:r,rm:s}:{add:a,rm:o})).rm(e,t,i,l)},i.addEventListener=i,e.exports=i;var n=null;function i(e,t,i,l){return(n=n||(document.addEventListener?{add:r,rm:s}:{add:a,rm:o})).add(e,t,i,l)}function r(e,t,n,i){e.addEventListener(t,n,i)}function s(e,t,n,i){e.removeEventListener(t,n,i)}function a(e,t,n,i){if(i)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+t,n)}function o(e,t,n,i){e.detachEvent("on"+t,n)}},tvjo:function(e,t,n){e.exports=a,a.available=function(){return!!o(document.body)},a.enabled=function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)};var i=n("vzCy").EventEmitter,r=n("G/vx"),s=r.removeEventListener;function a(e){for(var t=e.ownerDocument,n=(t.body,o(e)),a=new i,l=["","webkit","moz"],u=0,c=l.length;u<c;++u)r(t,l[u]+"fullscreenchange",h),r(t,l[u]+"fullscreenerror",v);return r(t,"MSFullscreenChange",h),r(t,"MSFullscreenError",v),a.release=function(){var n=e.exitFullscreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.mozExitFullScreen||e.msExitFullscreen;if(n)return void n.apply(e,arguments);(t.exitFullscreen||t.webkitExitFullscreen||t.mozCancelFullScreen||t.mozExitFullScreen||t.msExitFullscreen).apply(t,arguments)},a.request=function(){return n.apply(e,arguments)},a.dispose=function(){for(var e=0,n=l.length;e<n;++e)s(t,l[e]+"fullscreenchange",h),s(t,l[e]+"fullscreenerror",v);s(t,"MSFullscreenChange",h),s(t,"MSFullscreenError",v)},a.target=m,o||setTimeout(function(){a.emit("error",new Error("fullscreen is not supported"))},0),a;function h(){if(!m())return a.emit("release");a.emit("attain")}function v(){a.emit("error")}function m(){return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||null}}function o(e){return e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen}},vzCy:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(s(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(r(n))for(o=Array.prototype.slice.call(arguments,1),a=(u=n.slice()).length,l=0;l<a;l++)u[l].apply(this,o);return!0},n.prototype.addListener=function(e,t){var a;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(a=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var n,s,a,o;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,s=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(o=a;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){s=o;break}if(s<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}}});
//# sourceMappingURL=6.968dc9de1a620169800f.js.map