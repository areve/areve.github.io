webpackJsonp([9],{"2cFd":function(n,t){},"4AKn":function(n,t,a){"use strict";var r=a("Zrlr"),e=a.n(r),i=a("wxAW"),o=a.n(i),s=a("kQ6u");function h(n,t,a,r,e){for(var i=0,o=0;o<a;++o){if(i>o)for(var s=0;s<e;++s){var h=t+i*r+s,f=t+o*r+s,u=n[h];n[h]=n[f],n[f]=u}for(var v=a;i&(v>>=1);)i&=~v;i|=v}}function f(n,t,a,r,e){for(var i=t+a*r/2,o=0;o<a/2;++o)for(var s=0;s<e;++s){var h=t+o*r+s,f=i+o*r+s,u=n[h];n[h]=n[f],n[f]=u}}function u(n,t,a,r,e,i,o){return c(n,t,a,r,e,i,!0,o)}function v(n,t,a,r,e,i,o){return c(n,t,a,r,e,i,!1,o)}function c(n,t,a,r,e,i,o,s){for(var u=Math.PI,v=0;v<r;++v){o&&(f(n,v*i,a,e,s),f(t,v*i,a,e,s)),h(n,v*i,a,e,s),h(t,v*i,a,e,s);for(var c=o?u:-u,l=1;l<a;l+=l)for(var d=c/l,g=Math.sin(d/2),m=1,w=0,p=-2*g*g,C=Math.sin(d),_=0;_<l;++_){for(var y=_;y<a;y+=2*l)for(var b=y+l,k=0;k<s;++k){var P=v*i+y*e+k,M=v*i+b*e+k,R=n[M],B=t[M],I=R*m-B*w,x=R*w+B*m;n[M]=n[P]-I,t[M]=t[P]-x,n[P]+=I,t[P]+=x}var F=p*w+C*m;m+=p*m-C*w,w+=F}o||(f(n,v*i,a,e,s),f(t,v*i,a,e,s))}}var l=function(){function n(t,a,r,i,o,h){e()(this,n),this.channels=t,this.width=i,this.height=o,this.real=a||new Array(i*o*4),this.imag=r||new Array(i*o*4),this.buffer=h||new s.a(this.width,this.height)}return o()(n,[{key:"clone",value:function(){for(var t=new Array(this.real.length),a=0;a<this.real.length;a++)t[a]=this.real[a];for(var r=new Array(this.imag.length),e=0;e<this.imag.length;e++)r[e]=this.imag[e];return new n(this.channels,t,r,this.width,this.height)}},{key:"toBuffer",value:function(n){for(var t=new s.a(this.width,this.height),a=this.real,r=t.uint8,e=this.width*this.height,i=0;i<e;++i){for(var o=0;o<this.channels;++o){var h=4*i+o,f=a[h];f=f<0?0:f>1?1:f,n&&(f=Math.pow(f,1/n)),r[h]=255*f}r[4*i+3]=255}return t}},{key:"toMaginitude",value:function(){for(var n=this.clone(),t=n.real,a=n.imag,r=n.width*n.height,e=0;e<r;++e)for(var i=0;i<this.channels;++i){var o=4*e+i,s=t[o],h=a[o];t[o]=Math.sqrt(s*s+h*h)/r,a[o]=0}return n}},{key:"toPhase",value:function(){for(var n=this.clone(),t=n.real,a=n.imag,r=n.width*n.height,e=Math.PI,i=0;i<r;++i)for(var o=0;o<this.channels;++o){var s=4*i+o,h=t[s],f=a[s];t[s]=Math.atan2(f,h)/e/2+.5,a[s]=0}return n}},{key:"ifft",value:function(){var n=this.clone(),t=n.width,a=n.height,r=n.real,e=n.imag;u(r,e,t,a,4,4*t,this.channels),u(r,e,a,t,4*t,4,this.channels);for(var i=t*a,o=0;o<i;++o)for(var s=0;s<this.channels;++s){var h=4*o+s;r[h]=r[h]/i,e[h]=0}return n}},{key:"fft",value:function(){var n=this.clone(),t=n.width,a=n.height,r=n.real,e=n.imag;return v(r,e,t,a,4,4*t,this.channels),v(r,e,a,t,4*t,4,this.channels),n}},{key:"autoContrast",value:function(){for(var n=this.clone(),t=n.real,a=n.width*n.height,r=[1,1,1,1],e=[0,0,0,0],i=0;i<a;++i)for(var o=0;o<this.channels;++o){var s=t[4*i+o];r[o]=Math.min(s,r[o]),e[o]=Math.max(s,e[o])}for(var h=0;h<a;++h)for(var f=0;f<this.channels;++f){var u=4*h+f;t[u]=(t[u]-r[f])/(e[f]-r[f])}return n}}],[{key:"createFromImageBuffer",value:function(t){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=t.width*t.height,e=new Array(t.width*t.height*4),i=new Array(t.width*t.height*4),o=t.uint8,s=0;s<r;++s)for(var h=0;h<a;++h){var f=4*s+h;e[f]=o[f]/255,i[f]=0}return new n(a,e,i,t.width,t.height,t)}},{key:"createFromImage",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=s.a.createFromImage(t);return n.createFromImageBuffer(r,a)}}]),n}();t.a=l},y0UR:function(n,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),e=a.n(r),i=(a("4AKn"),a("eiJk"),a("kQ6u"));function o(){var n=[];n.push.apply(n,arguments);var t=n.shift(0);if(0===n.length)return"function"==typeof t?t():t;for(var a=[],r=0;r<t;r++)a.push(o.apply(this,n));return a}var s={plotLine:function(n){for(var t=this.clone(),a=t.uint8,r=t.width,e=t.height,i=r*e,s=o(0,4*r),h=n*r*4,f=0;f<4*r;++f)s[f]=a[h+f];for(f=0;f<i;++f)for(var u=0;u<3;++u){var v=f/r/e,c=f%r;a[4*f+u]=255-s[4*c+u]<255*v?255:0}return t},histogram:function(n){for(var t=this.clone(),a=t.uint8,r=t.width,e=t.height,i=r*e,s=o(3,r,0),h=0;h<i;++h)for(var f=0;f<3;++f){var u=4*h+f;s[f][Math.round(a[u]/255*(r-1))]++}if(n)for(h=0;h<r;++h)for(f=0;f<3;++f){u=4*h+f;s[f][h]=Math.log(s[f][h])*Math.LOG10E,s[f][h]=s[f][h]}var v=i;v=0;for(h=0;h<r;++h)for(f=0;f<3;++f)v=Math.max(s[f][h],v);for(h=0;h<i;++h)for(f=0;f<3;++f){var c=h%r,l=~~(h/r);a[u=4*h+f]=e-s[f][c]/v*e<l?255:0}return t}},h={factoryGradientPaint:function(){return function(n,t,a,r){return-16777216|255*(n%t/(t-1))<<8|255*(~~(n/t)/(a-1))}},factorySinePaint:function(n){var t=2*(n=n||1)*Math.PI;return function(n,a,r,e){var i=n%a/(a-1),o=127.5*Math.sin(t*i)+127.5;return 255<<24|o<<16|o<<8|o}},factorySpotPaint:function(n,t,a){t=t||0,a=a||0;var r=(n=n||1)/2,e=r*r;return function(n,r,i,o){var s=n%r/(r-1)-.5+t,h=~~(n/r)/(i-1)-.5+a,f=s*s+h*h>e?0:255;return 255<<24|f<<16|f<<8|f}},factorySoftSpotPaint:function(n,t,a,r){a=a||0,r=r||0;var e=(n=n||1)/2,i=(t=t||.5)/2;return a-=.5,r-=.5,function(n,t,o,s){var h=n%t/(t-1)+a,f=~~(n/t)/(o-1)+r,u=Math.sqrt(h*h+f*f),v=u>e?0:u>i?255*(u-e)/(i-e):255;return 255<<24|v<<16|v<<8|v}},factoryCheckPaint:function(n){return n=n||8,function(t,a,r,e){var i=(~~(n*(t%a/a))+~~(n*(~~(t/a)/r))+1)%2*255;return 255<<24|i<<16|i<<8|i}},factoryGaussianSpotPaint:function(){return function(n,t,a,r){var e=n%t/(t-1)-.5,i=~~(n/t)/(a-1)-.5,o=Math.exp(e*e/-.03125)*Math.exp(i*i/-.03125)*255;return 255<<24|o<<16|o<<8|o}}},f=(a("gTRW"),function(n,t,a,r){return n*r+t*a}),u=function(n,t,a,r){return n*(r+t*a)},v=function(n,t,a,r){return 1-(1-n)*(r+(1-t)*a)},c=function(n,t,a,r){return n*r+Math.min(n,t)*a},l=function(n,t,a,r){return n*r+Math.max(n,t)*a},d=function(n,t,a,r){return n-1+t},g=function(n,t,a,r){return n+t*a},m=function(n,t,a,r){return n+(2*t-1)},w=function(n,t,a,r){return 2*n-1+.5+(2*t-1)/2},p=function(n,t,a,r){return Math.abs(n-t)},C=function(n,t,a,r){return 1-((2*n-1)*(2*t-1)+1)/2},_={normal:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,f,t,a)},multiply:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,u,t,a)},screen:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,v,t,a)},darken:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,c,t,a)},lighten:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,l,t,a)},linearBurn:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,d,t,a)},linearDodge:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,g,t,a)},linearLight:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,m,t,a)},overlay:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,w,t,a)},difference:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,p,t,a)},exclusion:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return this._combine(n,C,t,a)},_combine:function(n,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,e=this.clone(),i=e.uint8,o=n.uint8,s=e.width*e.height,h=a,f=1-a,u=0;u<s;++u)for(var v=0;v<r;++v){var c=4*u+v;i[c]=255*t(i[c]/255,o[c]/255,h,f)}return e}},y=a("kwsk"),b={name:"Fft",data:function(){return{loaders:[{id:"gradientPaint()",generator:h.factoryGradientPaint()},{id:"sinePaint(4)",generator:h.factorySinePaint(4)},{id:"gaussianSpotPaint()",generator:h.factoryGaussianSpotPaint()},{id:"checkPaint(8)",generator:h.factoryCheckPaint(8)},{id:"softSpotPaint(1, 0.5, 0.3, 0.3)",generator:h.factorySoftSpotPaint(1,.5,.3,.3)},{id:"spotPaint(0.8, 0, 0)",generator:h.factorySpotPaint(.8,0,0)}]}},beforeDestroy:function(){this.destroyChildObjects()},mounted:function(){var n=this;"undefined"==typeof jest&&(this.loadAllCanvas(),this.addImageRow("lena","/static/sample-images/lena.png"),this.addImageRow("clown","/static/sample-images/clown.jpg"),this.addImageRow("twigs","/static/sample-images/twigs.jpg"),this.loadAndResizeBuffer("/static/sample-images/lena.png",function(t){var a=e()(new i.a(80,80),s);a.loadFromUnknownType(h.factoryGaussianSpotPaint()),t=e()(t,_),n.addBufferRow("normal(lena, spot, 0.5)",t.normal(a,.5)),n.addBufferRow("multiply(lena, spot, 0.5)",t.multiply(a,.5)),n.addBufferRow("screen(lena, spot, 0.5)",t.screen(a,.5)),n.addBufferRow("darken(lena, spot, 0.5)",t.darken(a,.5)),n.addBufferRow("lighten(lena, spot, 0.5)",t.lighten(a,.5)),n.addBufferRow("linearBurn(lena, spot, 0.5)",t.linearBurn(a,.5)),n.addBufferRow("linearDodge(lena, spot, 0.5)",t.linearDodge(a,.5)),n.addBufferRow("linearLight(lena, spot, 0.5)",t.linearLight(a,.5)),n.addBufferRow("overlay(lena, spot, 0.5)",t.overlay(a,.5)),n.addBufferRow("difference(lena, spot, 0.5)",t.difference(a,.5)),n.addBufferRow("exclusion(lena, spot, 0.5)",t.exclusion(a,.5))}),this.constantly=Object(y.a)(function(){return n.loadAllCanvas()},5))},methods:{destroyChildObjects:function(){this.constantly&&this.constantly.destroy()},addImageRow:function(n,t){var a=this,r={id:n};this.loaders.push(r),this.loadAndResizeBuffer(t,function(t){r.generator=t.uint32,a.addBufferRow(n+"-buffer",t)})},loadAndResizeBuffer:function(n,t){i.a.createFromImageUrl(n,function(n){n.resizeTo(80,80),t(n)})},addBufferRow:function(n,t){this.loaders.push({id:n,generator:t.uint32})},loadAllCanvas:function(){var n=this;this.loaders.forEach(function(t,a){t.generator&&!t.origCanvas&&(t.origCanvas=n.$refs["origCanvas_"+a][0],t.histogramCanvas=n.$refs["histogramCanvas_"+a][0],t.histograLogmCanvas=n.$refs["histogramLogCanvas_"+a][0],t.line35Canvas=n.$refs["line35Canvas_"+a][0],t.line50Canvas=n.$refs["line50Canvas_"+a][0],t.line20Canvas=n.$refs["line20Canvas_"+a][0],n.loadCanvas(t))})},loadCanvas:function(n){var t=e()(new i.a(80,80),s);t.loadFromUnknownType(n.generator),t.toCanvas(n.origCanvas),t.histogram().toCanvas(n.histogramCanvas),t.histogram(!0).toCanvas(n.histograLogmCanvas),t.plotLine(35).toCanvas(n.line35Canvas),t.plotLine(50).toCanvas(n.line50Canvas),t.plotLine(20).toCanvas(n.line20Canvas)}}},k={render:function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("section",[a("h1",[n._v("Histogram")]),n._v(" "),a("p",[n._v("Experiments with image generation, image combines and Histogram in javascript.")]),n._v(" "),n._l(n.loaders,function(t,r){return a("div",{key:t.id,staticClass:"row"},[a("h2",[n._v(n._s(t.id))]),n._v(" "),a("div",{staticClass:"box"},[n._v("\n      Original"),a("br"),n._v(" "),a("canvas",{ref:"origCanvas_"+r,refInFor:!0,staticClass:"orig-canvas",attrs:{width:"100",height:"100"}})]),n._v(" "),a("div",{staticClass:"box"},[n._v("\n      Histogram"),a("br"),n._v(" "),a("canvas",{ref:"histogramCanvas_"+r,refInFor:!0,staticClass:"histogram-canvas",attrs:{width:"100",height:"100"}})]),n._v(" "),a("div",{staticClass:"box"},[n._v("\n      Log10 Hist."),a("br"),n._v(" "),a("canvas",{ref:"histogramLogCanvas_"+r,refInFor:!0,staticClass:"histogram-log-canvas",attrs:{width:"100",height:"100"}})]),n._v(" "),a("div",{staticClass:"box"},[n._v("\n      Line 20"),a("br"),n._v(" "),a("canvas",{ref:"line20Canvas_"+r,refInFor:!0,staticClass:"line-20-canvas",attrs:{width:"100",height:"100"}})]),n._v(" "),a("div",{staticClass:"box"},[n._v("\n      Line 35"),a("br"),n._v(" "),a("canvas",{ref:"line35Canvas_"+r,refInFor:!0,staticClass:"line-35-canvas",attrs:{width:"100",height:"100"}})]),n._v(" "),a("div",{staticClass:"box"},[n._v("\n      Line 50"),a("br"),n._v(" "),a("canvas",{ref:"line50Canvas_"+r,refInFor:!0,staticClass:"line-50-canvas",attrs:{width:"100",height:"100"}})])])})],2)},staticRenderFns:[]};var P=a("VU/8")(b,k,!1,function(n){a("2cFd")},"data-v-7bc59c98",null);t.default=P.exports}});
//# sourceMappingURL=9.2a79a0432c2ab96f6ef0.js.map